{"version":3,"sources":["app.js","src/utils/helpers.js","src/components/navigation/navigation.js","src/utils/promises-ajax.js","src/components/footer/weather.js","src/components/footer/subway.js","src/components/footer/time.js","src/components/footer/bike.js","src/components/footer/footer.js","src/components/contact/selectform.js","src/components/contact/contactform.js","src/script.js"],"names":["utils","viewportWidth","window","innerWidth","throttle","callback","delay","last","timer","context","now","Date","args","arguments","clearTimeout","setTimeout","apply","debounce","func","wait","immediate","timeout","later","callNow","createTlPromise","tl","e","Promise","resolve","eventCallback","matchesMediaQuery","callbackObj","xs","matchMedia","sm","md","property","matches","getLanguage","document","documentElement","getAttribute","findAncestor","el","cls","parentElement","classList","contains","charming","element","options","tagName","classPrefix","count","inject","parentNode","string","nodeValue","length","i","node","createElement","className","appendChild","createTextNode","insertBefore","removeChild","traverse","nodeType","Node","TEXT_NODE","childNodes","Array","prototype","slice","call","Navigation","nav","button","querySelector","buttonUI","animationProgress","scrollEventCallbackBinded","firstLoad","currentY","_configAnimation","buttonIcons","buttonIconList","querySelectorAll","menu","menuLinks","menuLang","animation","TimelineMax","paused","fromTo","ease","Sine","easeInOut","easeOut","add","Power2","height","Power0","easeNone","set","staggerFromTo","progress","body","setAttribute","_play","_enableScrollEvent","timeScale","play","_reverse","removePause","reverse","_scrollEventCallback","pageYOffset","removeEventListener","bind","addEventListener","_navigationAction","isActive","_navigationEnter","addPause","_navigationOut","_bindEvent","EventNavigationEnter","EventNavigationOut","EventNavigationAction","init","resize","kill","AjaxRequest","url","getRequestPromise","uri","type","params","undefined","uriContent","props","Object","keys","requestPromise","postRequestPromise","reject","xhr","XMLHttpRequest","open","send","JSON","stringify","requestResponsePromise","onreadystatechange","readyState","status","response","Error","onerror","Forecast","weatherTarget","tempTarget","wording","en","Rain","Clear","Clouds","Atmosphere","Snow","Thunderstorm","Extreme","fr","_storeWeatherData","data","self","weatherData","parse","_displayWeather","innerHTML","main","temp","toFixed","weatherWording","language","weather","getWeather","weatherRequest","weatherDeffered","then","success","error","console","log","Subway","subwayTarget","subwayTargete","getSubwayTraffic","trafficRequest","trafficDeffered","ratpApi","rejected","traffic","TimeServer","hour","min","matin","midi","apresmidi","soir","nuit","weekend","ouvert","fermee","timePromise","_requestTimer","_requestPromise","hourRequest","_checkTime","_clock","setTime","initTime","setSeconds","getSeconds","clockMechanism","today","diff","getHours","getMinutes","getHour","displayHour","defferedHour","displayPeople","target","welcome","stateTarget","messageTarget","hourData","day","getDay","peopleContent","isWelcome","Velib","bikeTarget","getInformation","velibRequest","velibDeffered","velibStation","available_bike_stands","footer","getElementById","forecastObj","bikeObj","subwayObj","deferedSubway","ok","nok","hs","time","state","result","slug","etat","minutesTarget","hoursTarget","welcomeTarget","hourObj","SelectForm","modalTool","placeholder","placeholderInitWording","_selectboxCLick","stopPropagation","selected","textContent","remove","toggle","EventSelectboxClick","ContactForm","next","secure","t","lang","_sectionScopeRoute","section","_scopeName","_scopeBusinessType","_scopeBusinessName","_scopeMission","_scopeMissionDetail","_scopeMessage","_scopeEmail","scope","name","value","forEach","_changeQuestionNumber","_animationNewScope","businessType","persoNom","persoPronom","companyNom","companyPronom","orgaNom","orgaPronom","businessNomination","businessPronoun","businessName","mission","switcher","style","display","missionDetails","message","formAnswer","buttonNext","icoError","validEmail","_testEmail","email","ajaxForm","_disableEnterEventer","answersInputs","keyCode","preventDefault","blur","num","firstItem","parseInt","re","test","_nextButton","appear","buttonContainer","buttonShape","anime","timeline","targets","duration","easing","opacity","offset","translateX","points","_observer","observer","MutationObserver","mutations","mutation","observe","childList","characterData","attributes","_observerSelect","disconnect","_enableAnswerObserver","inputs","nodeName","toLowerCase","j","_animationAppear","writters","question","answer","answerInput","questionChars","answerChars","animeParam","letters","speed","writter","formAnimation","autoplay","translateY","elasticity","scaleX","complete","select","nextElementSibling","bundle","navigation","config","navigationEl","contactFormEl","contactForm","BindUIActions","event","Footer"],"mappings":"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","file":"app.js","sourcesContent":["(function () {\n'use strict';\n\nvar utils = {\n\n  viewportWidth : window.innerWidth,\n\n\n\n  //-----------------------------\n  // THROTTLE FUNC\n  //-----------------------------\n\n  throttle : function(callback, delay) {\n    var last;\n    var timer;\n    return function () {\n        var context = this;\n        var now = +new Date();\n        var args = arguments;\n        if (last && now < last + delay) {\n            // le délai n'est pas écoulé on reset le timer\n            clearTimeout(timer);\n            timer = setTimeout(function () {\n                last = now;\n                callback.apply(context, args);\n            }, delay);\n        } else {\n            last = now;\n            callback.apply(context, args);\n        }\n    };\n  },\n\n\n  //-----------------------------\n  // DEBOUNCE FUNC\n  //-----------------------------\n\n  debounce: function(func, wait, immediate) {\n  \tvar timeout;\n  \treturn function() {\n  \t\tvar context = this, args = arguments;\n  \t\tvar later = function() {\n  \t\t\ttimeout = null;\n  \t\t\tif (!immediate) func.apply(context, args);\n  \t\t};\n  \t\tvar callNow = immediate && !timeout;\n  \t\tclearTimeout(timeout);\n  \t\ttimeout = setTimeout(later, wait);\n  \t\tif (callNow) func.apply(context, args);\n  \t};\n  },\n\n\n  //-----------------------------\n  // CREATE PROMISE FOR TL\n  //-----------------------------\n\n  //tl = timeline a observer\n  // e = event de callback => (ex: \"onComplete\"...)\n  createTlPromise : function(tl, e){\n    return new Promise((resolve)=>{\n      tl.eventCallback(e, function() {\n        resolve(true);\n      });\n    });\n  },\n\n\n  //-----------------------------\n  // RESPONSIVE FUNC\n  //-----------------------------\n\n  //ordre du callback : responsive ORD, responsive TAB, responsive MOB\n\n  matchesMediaQuery : function(callbackObj){\n    const xs = window.matchMedia(\"(min-width: 0px)\");\n    const sm = window.matchMedia(\"(min-width: 768px)\");\n    const md = window.matchMedia(\"(min-width: 1024px)\");\n\n\n    // check obj de callback\n    for(let property in callbackObj){\n\n      if(md.matches && property === 'md'){\n\n          return callbackObj[property](); //callback pour ord\n\n      }else if(sm.matches && property === 'sm'){\n\n          return callbackObj[property](); //callback pour tab\n\n      }else if(xs.matches && property === 'xs'){\n\n          return callbackObj[property](); //callback pour mob\n\n      }\n    }\n  },\n\n  getLanguage: function(){\n    return document.documentElement.getAttribute('lang');\n  },\n\n  findAncestor: function(el, cls) {\n    while ((el = el.parentElement) && !el.classList.contains(cls));\n    return el;\n  },\n\n  // CHARMING JS via https://github.com/yuanqing/charming/blob/master/index.js\n  charming: function(element, options){\n    options = options || {};\n\n    var tagName = options.tagName || 'span';\n    var classPrefix = options.classPrefix != null ? options.classPrefix : 'char';\n    var count = 1;\n\n    function inject (element) {\n      var parentNode = element.parentNode;\n      var string = element.nodeValue;\n      var length = string.length;\n      var i = -1;\n      while (++i < length) {\n        var node = document.createElement(tagName);\n        if (classPrefix) {\n          node.className = classPrefix + count;\n          count++;\n        }\n        node.appendChild(document.createTextNode(string[i]));\n        parentNode.insertBefore(node, element);\n      }\n      parentNode.removeChild(element);\n    }\n\n    (function traverse (element) {\n      // `element` is itself a text node.\n      if (element.nodeType === Node.TEXT_NODE) {\n        return inject(element)\n      }\n\n      // `element` has a single child text node.\n      var childNodes = Array.prototype.slice.call(element.childNodes); // static array of nodes\n      var length = childNodes.length;\n      if (length === 1 && childNodes[0].nodeType === Node.TEXT_NODE) {\n        return inject(childNodes[0])\n      }\n\n      // `element` has more than one child node.\n      var i = -1;\n      while (++i < length) {\n        traverse(childNodes[i]);\n      }\n    })(element);\n  }\n};\n\n//modules utils\n//------------------------------\n//------------------------------\n// MODULE GENERAL NAVIGATION\n//------------------------------\n//------------------------------\n\nvar Navigation = function(el){\n\n  //composants DOM\n  this.nav = el;\n  this.button = el.querySelector('.js-nav-button'); //bouton à actionner\n  this.buttonUI = el.querySelector('.js-nav-trigger');\n\n};\n\n\nNavigation.prototype = function(){\n\n  //-----------------------\n  // PRIVATE\n  //-----------------------\n\n  //GLOBALES\n  var animationProgress = 0,\n  scrollEventCallbackBinded = null,\n  firstLoad = true,\n  currentY;\n\n\n  // ANIMATION TWEENMAX (private)\n  var _configAnimation = function(){\n\n    /* Elements du DOM */\n    var buttonIcons = this.nav.querySelector('.js-menu-trigger'),\n    buttonIconList = this.nav.querySelectorAll('.menu-trigger__ico__bar'),\n    menu = this.nav.querySelector('.js-nav-menu'),\n    menuLinks = menu.querySelectorAll('.menu-nav__list__item'),\n    menuLang = menu.querySelector('.menu-nav__langs');\n\n\n    this.animation = new TimelineMax({paused:true});\n\n    //scenario de l'animation\n    this.animation\n    .fromTo(this.nav, .25, {className: \"-=a-nav-open\"}, {className: \"+=a-nav-open\", ease: Sine.easeInOut})\n    .fromTo(buttonIconList[0], .3, {className: \"-=a-ico-open\"}, {className: \"+=a-ico-open\", ease: Sine.easeOut}, 0.1)\n    .fromTo(buttonIconList[1], .3, {className: \"-=a-ico-open\"}, {className: \"+=a-ico-open\", ease: Sine.easeOut}, \"-=.2\")\n    .fromTo(buttonIconList[2], .3, {className: \"-=a-ico-open\"}, {className: \"+=a-ico-open\", ease: Sine.easeOut}, \"-=.35\")\n\n    .add(\"click\")\n    .fromTo(menu, .6, {className: \"-=a-menu-expend\"}, {className: \"+=a-menu-expend\", ease: Power2.easeOut})\n    .fromTo(buttonIcons, .1, {height: \"50%\"}, {height: \"100%\", ease: Power0.easeNone}, \"-=.5\")\n    .set(this.buttonUI, {className: \"+=a-ui-expend\"})\n    .staggerFromTo(menuLinks, .35, {className: \"-=a-menu__item-expend\"}, {className: \"+=a-menu__item-expend\", ease: Sine.easeOut}, .2)\n    .add(\"openNav\")\n    .fromTo(menuLang, .6, {className: \"-=a-menu__item-expend\"}, {className: \"+=a-menu__item-expend\", ease: Sine.easeOut}, '-=.2');\n\n    //mise en place de la scene à la bonne séquence\n    this.animation.progress(animationProgress);\n\n\n    //check home page ou non => la nav doit être visible sur la nav uniquement\n    if(document.body.classList.contains('home')){\n      utils.matchesMediaQuery(\n        {\n          sm: ()=>{\n            if(firstLoad === true){\n\n              //ouverture\n              // this.animation.progress(1); //desactivé pour jouer l'ouverture au chargement\n\n              this.buttonUI.setAttribute('aria-expanded', 'true');\n\n              //timeout pour eviter lag de début (pas css chargé encore) => on peut voir load au lieu de domcontentloaded dans le script ?\n              setTimeout(()=>{\n                _play.call(this);\n              }, 500);\n\n\n              //ajout de la fermeture auto au 1er load page home\n              _enableScrollEvent.call(this);\n\n              //drapeau\n              firstLoad = false;\n            }\n\n          },\n          xs: ()=>{\n            this.animation.progress(0);\n            this.buttonUI.setAttribute('aria-expanded', 'false') ;\n\n          }\n        }\n      );\n    }\n  },\n\n\n  // LANCEMENT ANIMATION (private)\n  _play = function(){\n    this.animation.timeScale(1);\n    this.animation.play();\n  },\n\n\n  // RETOUR ARIERRE ANIMATION (private)\n  _reverse = function(){\n    this.animation.removePause(\"click\");\n    this.animation.timeScale(1.5);\n\n    // this.animation.seek('openNav'); //saut avant l'apparition des items\n    this.animation.reverse();\n  },\n\n\n  //FONCTION DE CALLBACK AU SCROLL (private)\n  _scrollEventCallback = function(){\n\n    // vérifie si on slide plus de 200px vers le haut ou bas\n    if(currentY > (window.pageYOffset + 200) || currentY < (window.pageYOffset - 200)){\n\n      //on ferme la nav\n      _reverse.call(this);\n\n      //on ferme l'ARIA flag\n      this.buttonUI.setAttribute('aria-expanded', 'false') ;\n\n      //on retire l'event\n      window.removeEventListener('scroll', scrollEventCallbackBinded, false);\n      scrollEventCallbackBinded = null; //reset le bind pour eviter conflit entre click et scroll\n    }\n  },\n\n\n  //ACTIVATION DE L'EVENT DE SCROLL (private)\n  _enableScrollEvent = function(){\n    // activation fermeture scroll\n    currentY = window.pageYOffset;\n\n    //si l'event de scroll n'est pas encore instancié\n    if(scrollEventCallbackBinded === null){\n      scrollEventCallbackBinded = _scrollEventCallback.bind(this);\n    }\n\n    window.addEventListener('scroll', scrollEventCallbackBinded, false);\n\n  },\n\n\n  // ACTION CLICK (private)\n  _navigationAction = function(e){\n\n    //ARIA activé ou non\n    this.buttonUI.getAttribute('aria-expanded') === \"true\" ? this.buttonUI.setAttribute('aria-expanded', 'false') : this.buttonUI.setAttribute('aria-expanded', 'true');\n\n\n    //nav fermé => on ouvre\n    if(this.buttonUI.getAttribute('aria-expanded') === \"true\"){\n\n      // si l'animation hover est en cours, on retire le break pour la laisser fini jusqu'au bout\n      if(this.animation.isActive()){\n\n        this.animation.removePause(\"click\");\n\n      }else{\n        _play.call(this);\n      }\n\n      //activation de l'event de scroll\n      _enableScrollEvent.call(this);\n\n\n    // nav déja etendu => on close\n    }else{\n      window.removeEventListener('scroll', scrollEventCallbackBinded, false);\n      scrollEventCallbackBinded = null; //reset le bind pour eviter conflit entre click et scroll\n      _reverse.call(this);\n    }\n  },\n\n\n  // ACTION HOVER ENTER (private)\n  _navigationEnter = function(){\n\n    //si la nav est fermée\n    if(this.buttonUI.getAttribute('aria-expanded') === \"false\"){\n      this.animation.timeScale(1);\n      this.animation.play();\n      this.animation.addPause(\"click\");\n    }else{\n\n      //effet de hover\n      // this.nav.querySelector('.menu-trigger__ico').classList.add(\"a-ico-hover\");\n\n    }\n  },\n\n\n  // ACTION HOVER OUT (private)\n  _navigationOut = function(){\n\n    // si nav fermée, on peut close la languette\n    if(this.buttonUI.getAttribute('aria-expanded') === \"false\"){\n\n      this.animation.reverse();\n\n    }else{\n\n      //hover nav fermée\n      // this.nav.querySelector('.menu-trigger__ico').classList.remove(\"a-ico-hover\");\n\n    }\n  },\n\n\n  // BIND DES EVENTS (private)\n  _bindEvent = function(el){\n\n    let EventNavigationEnter = _navigationEnter.bind(this);\n    let EventNavigationOut = _navigationOut.bind(this);\n    let EventNavigationAction = _navigationAction.bind(this);\n    el.addEventListener('mouseenter', EventNavigationEnter, false);\n    el.addEventListener('mouseleave', EventNavigationOut, false);\n    el.addEventListener('click', EventNavigationAction, false);\n\n\n    //EVENT RESIZE OLD => Maintenant dans le script via public method\n\n    //debounce\n    // var resizeEvent = utils.debounce(()=>{\n    //\n    //   console.log(utils.viewportWidth);\n    //   console.log(window.innerWidth)\n    //\n    //   // si la largeur de l'écran à bien changé (toolbar iphone change hauteur)\n    //   if(window.innerWidth !== utils.viewportWidth){\n    //\n    //     console.log(\"ici\");\n    //\n    //     let isActive = this.animation.isActive();\n    //\n    //     //sauvegarde de la scene en cour\n    //     animationProgress = this.animation.progress();\n    //\n    //     //destruction de la timeline\n    //     this.animation.kill();\n    //\n    //     //construciton d'une nouvelle animation\n    //     _configAnimation.call(this);\n    //\n    //     //active l'animation si elle était en cours\n    //     isActive && this.animation.play();\n    //\n    //   }\n    //\n    //\n    // }, 250);\n\n  //  window.addEventListener(\"resize\", resizeEvent.bind(this), false);\n  };\n\n\n  //-----------------------\n  // PUBLIC\n  //-----------------------\n\n  // INIT DU MODULE (public)\n  var init = function(){\n    _bindEvent.call(this, this.button);\n    _configAnimation.call(this);\n  },\n\n  resize = function(){\n\n\n    // si la largeur de l'écran à bien changé (toolbar iphone change hauteur)\n    if(window.innerWidth !== utils.viewportWidth){\n\n      let isActive = this.animation.isActive();\n\n      //sauvegarde de la scene en cour\n      animationProgress = this.animation.progress();\n\n      //destruction de la timeline\n      this.animation.kill();\n\n      //construciton d'une nouvelle animation\n      _configAnimation.call(this);\n\n      //active l'animation si elle était en cours\n      isActive && this.animation.play();\n\n    }\n  };\n\n  return {\n    init,\n    resize\n  }\n}();\n\n/*******************************\n-------- AJAX\n*******************************/\nvar AjaxRequest = function(url) {\n    this.url = url;\n};\n\nAjaxRequest.prototype = function() {\n    //request by GET : URI / no PARAMS\n    var getRequestPromise = function(uri) {\n        this.type = 'GET';\n        this.params = null;\n\n        if (uri !== undefined) {\n            var uriContent = '';\n            for (var props in uri) {\n                if (props === Object.keys(uri)[0]) {\n                    uriContent = uriContent + props + '=' + uri[props];\n                } else {\n                    uriContent = uriContent + '&' + props + '=' + uri[props];\n                }\n            }\n            this.uri = '?' + uriContent;\n        } else {\n            this.uri = \"\";\n        }\n\n        return requestPromise.call(this);\n    };\n\n    //request by POST : no URI / PARAMS\n    var postRequestPromise = function(uri) {\n        this.type = 'POST';\n        this.params = uri;\n        this.uri = \"\";\n\n        return requestPromise.call(this);\n    };\n\n    //requete\n    var requestPromise = function() {\n\n        return new Promise((resolve, reject)=>{\n            var xhr = new XMLHttpRequest();\n\n            xhr.open(this.type, this.url + this.uri, true);\n            xhr.send(JSON.stringify(this.params));\n\n            return requestResponsePromise(xhr, resolve, reject);\n        });\n    };\n    var requestResponsePromise = function(xhr, resolve, reject) {\n        xhr.onreadystatechange = function() {\n            if (xhr.readyState === 4) {\n                if (xhr.status === 200) {\n                    resolve(xhr.response);\n                } else {\n                    reject(Error('Error: ' + xhr.status));\n                }\n            }\n        };\n        xhr.onerror = function() {\n            reject(Error('There was a network error.'));\n        };\n    };\n\n    return {\n        getRequestPromise,\n        postRequestPromise\n    };\n}();\n\n//modules utils\n//------------------------------\n//==============================\n// MODULE FORECASTING\n//==============================\n//------------------------------\n\n/***********\n INIT\n ***********/\nvar Forecast = function(weatherTarget, tempTarget) {\n  this.weatherTarget = weatherTarget; //element DOM à remplacer pour la météo\n  this.tempTarget = tempTarget; //element DOM à remplacer pour la temperature\n};\n\n/***********\n PROTOTYPE\n ***********/\nForecast.prototype = function() {\n\n/***** GLOBALES *****/\n  var wording = {\n    en: {\n      Rain: \"rainy\",\n      Clear: \"sunny\",\n      Clouds: \"cloudy\",\n      Atmosphere: \"misty\",\n      Snow: \"snowy\",\n      Thunderstorm: \"stormy\",\n      Extreme: \"danger\"\n    },\n    fr: {\n      Rain: \"pluvieux\",\n      Clear: \"soleil\",\n      Clouds: \"nuageux\",\n      Atmosphere: \"brumeux\",\n      Snow: \"enneigé\",\n      Thunderstorm: \"tempête\",\n      Extreme: \"danger\"\n    }\n  };\n\n  /***** PRIVATES *****/\n  //==== utils ===\n  var url = \"https://api.de-jaune-et-de-bleu.com/Get/weather\"; //url de requete API\n\n  //==== funcs ====\n  //Func pour enregistrer les datas AJAX\n  var _storeWeatherData = function(data, self) {\n    //rec\n    self.weatherData = Forecast.prototype.weatherData = JSON.parse(data);\n    //display\n    _displayWeather.call(self);\n  };\n\n  //Func pour afficher la météo dans le DOM\n  var _displayWeather = function() {\n    //temperature\n    this.tempTarget.innerHTML = ` ${this.weatherData.main.temp.toFixed(1)} <sup>°</sup>C`;\n    //météo\n    let weatherWording;\n    let language = utils.getLanguage();\n\n    switch (this.weatherData.weather[0].main) {\n      case \"Rain\":\n        weatherWording = wording[language][\"Rain\"];\n        break;\n      case \"Clear\":\n        weatherWording = wording[language][\"Clear\"];\n        break;\n      case \"Clouds\":\n        weatherWording = wording[language][\"Clouds\"];\n        break;\n      case \"Atmosphere\":\n        weatherWording = wording[language][\"Atmosphere\"];\n        break;\n      case \"Snow\":\n        weatherWording = wording[language][\"Snow\"];\n        break;\n      case \"Thunderstorm\":\n        weatherWording = wording[language][\"Thunderstorm\"];\n        break;\n      case \"Extreme\":\n        weatherWording = wording[language][\"Extreme\"];\n        break;\n      default:\n        weatherWording = wording[language][\"Rain\"];\n    }\n\n    this.weatherTarget.innerHTML = weatherWording;\n  };\n\n  /***** PUBLIC *****/\n  //==== funcs ====\n\n  //Func pour récupérer l'API météo par Ajax\n  var getWeather = function() {\n    //variables\n    let type = 'GET';\n    let params = {};\n    var self = this;\n\n    //création de la promise Ajax\n    var weatherRequest = new AjaxRequest(url, type);\n    var weatherDeffered = weatherRequest.getRequestPromise(params);\n\n    //resolution de promise\n    weatherDeffered.then(function(success) {\n      //Succès : fonction d'enregistrement des datas\n      _storeWeatherData(success, self);\n    }, function(error) {\n      //Echec : message erreur\n      window.console.log('Error : ' + error);\n    });\n  };\n\n  return {\n    getWeather\n  };\n}();\n\n//modules utils\n//------------------------------\n//==============================\n// MODULE SUBWAY\n//==============================\n//------------------------------\n\nvar Subway = function(subwayTarget) {\n    this.subwayTargete = \"test\";\n};\n\nSubway.prototype = function() {\n\n  /***** PUBLIC *****/\n  //==== funcs ====\n  //Func pour récupérer l'état du traffc de la ligne 2 du métro parisien\n  var getSubwayTraffic = function() {\n\n    //variables\n    let type = 'GET';\n    let url = \"https://api.de-jaune-et-de-bleu.com/Get/subway\";\n    let params = {};\n\n    //création de la promise Ajax\n    var trafficRequest = new AjaxRequest(url, type);\n    var trafficDeffered = trafficRequest.getRequestPromise(params);\n\n    //resolution de promise\n    return trafficDeffered.then(function(success) {\n      //success : affichage l'état du service\n      var ratpApi = new Promise(function(resolve, rejected) {\n        var traffic = JSON.parse(success);\n        if (success) {\n          resolve(traffic);\n        } else {\n          rejected(\"error\");\n        }\n      });\n      return ratpApi;\n\n    }, function(error) {\n      //Echec : message erreur\n      window.console.log('Error : ' + error);\n    });\n  };\n\n  return {\n    getSubwayTraffic\n  };\n}();\n\n//modules utils\n//------------------------------\n//==============================\n// MODULE HOUR\n//==============================\n//------------------------------\n\n//POTENTIEL SOURCEZ LEAK MEMORY : peut etre actualiser toutes les minutes et non secondes\n\nvar TimeServer = function(hour, min) {\n  this.hour = hour;\n  this.min = min;\n};\n\nTimeServer.prototype = function() {\n\n  /***** GLOBALES *****/\n\n  var wording = {\n    en: {\n      matin: \"work work work\",\n      midi: \"lunch time!\",\n      apresmidi: \"let's meet!\",\n      soir: \"have a drink?\",\n      nuit: \"time to get rest\",\n      weekend: \"back on Monday!\",\n\n      ouvert: \"you are welcome\",\n      fermee: \"see you soon\"\n    },\n    fr: {\n      matin: \"au boulot !\",\n      midi: \"la pause sacrée\",\n      apresmidi: \"voyons-nous !\",\n      soir: \"un verre ?\",\n      nuit: \"un peu de repos\",\n      weekend: \"de retour lundi !\",\n\n      ouvert: \"bienvenue à l'atelier\",\n      fermee: \"on se voit bientôt ?\"\n    }\n  };\n\n\n  /***** PRIVATES *****/\n  //==== utils ===\n  var timePromise;//promesse contenant le retour d'API \"hour\"\n\n  //==== funcs ===\n  //Func de balance entre la promise et son enregistrement (evite de charger l'API 2x)\n  var _requestTimer = function(){\n    return timePromise = timePromise === undefined ? _requestPromise() : timePromise;\n  };\n\n  //Func to get time from djdb server\n  var _requestPromise = function() {\n    //variables\n    let type = 'GET';\n    let url = \"https://api.de-jaune-et-de-bleu.com/Get/hour\";\n    let params = {};\n    var hourRequest = new AjaxRequest(url, type);\n    return hourRequest.getRequestPromise(params);\n  };\n\n  //Func to create time\n  var _checkTime = function(i) {\n    if (i < 10) {\n        i = \"0\" + i; // add zero in front of numbers < 10\n    }\n    return i;\n  };\n\n  //Func pour calculer l'heure\n  var _clock = function(setTime) {\n    //init time pour eviter un decalage avec la récupération async de l'heure serveur\n    var initTime = setTime.setSeconds(new Date(Date.now()).getSeconds());\n\n    //func de timer\n    var clockMechanism = function(setTime){\n      //variables de temps\n      let today = new Date(setTime);\n      let now = new Date(Date.now());\n\n\n      //recalcul\n      let diff = now.getSeconds() - today.getSeconds();\n      diff < 0 ? diff = 1 : diff = diff; //corriger le differentiel au changement de minute\n      if(diff > 0 ){\n\n        //Affichage dans le DOM\n        this.hour.innerHTML = _checkTime(today.getHours());\n        this.min.innerHTML = _checkTime(today.getMinutes());\n\n        today.setSeconds(today.getSeconds() + diff); //change secondes\n      }\n\n      //regeneration par seconde\n      setTimeout(()=>{\n        clockMechanism.call(this, today);\n      }, 100);\n    };\n\n    //init\n    clockMechanism.call(this, initTime);\n  };\n\n  /***** PUBLICS *****/\n\n  //Func pour récupérer l'heure brut depuis le server\n  var getHour = function() {\n    return _requestTimer();\n  };\n\n  //Func pour afficher l'heure\n  var displayHour = function() {\n\n    //On récupère l'heure via une promise AJAX\n    let defferedHour = _requestTimer();\n    defferedHour.then((success)=>{\n      //Success : on appelle la fonction de génération de l'-heure\n      _clock.call(this, new Date(success));\n\n    }, function(error) {\n      window.console.log('Error : ' + error);\n    });\n  };\n\n  //Func pour afficher ce qu'il se passe à l'atelier en fonction de l'heure\n  var displayPeople = function(target, welcome) {\n    var stateTarget = target;\n    var messageTarget = welcome;\n\n    //on récupère l'heure => A FAIRE !! chainer une promise après recupe date pour gérer l'heure sans faire une double requete : si, this undefined alors, enregistrer la premiere promise en this et chainer les propriétés à cette promise. enfin stocker le resultat en this\n    var defferedHour = _requestTimer();\n    defferedHour.then(function(success) {\n      //Success : on segmente l'heure\n\n      var hourData = new Date(success);\n      var hour = hourData.getHours(),\n      day = hourData.getDay(),\n      peopleContent, isWelcome;\n\n      let language = utils.getLanguage();\n\n      //Segmentation\n      if(day === 0 || day === 6){\n        //weekend\n        peopleContent = wording[language][\"weekend\"];\n        isWelcome = wording[language][\"fermee\"];\n\n      } else if(hour >= 9 && hour <= 11) {\n        peopleContent = wording[language][\"matin\"];\n        isWelcome = wording[language][\"ouvert\"];\n      } else if (hour >= 12 && hour <= 13) {\n        peopleContent = wording[language][\"midi\"];\n        isWelcome = wording[language][\"ouvert\"];\n      } else if (hour >= 14 && hour <= 18) {\n        peopleContent = wording[language][\"apresmidi\"];\n        isWelcome = wording[language][\"ouvert\"];\n      } else if (hour >= 19 && hour <= 23) {\n        peopleContent = wording[language][\"soir\"];\n        isWelcome = wording[language][\"fermee\"];\n      } else {\n        peopleContent = wording[language][\"nuit\"];\n        isWelcome = wording[language][\"fermee\"];\n      }\n\n      //display dans le DOM\n      stateTarget.innerHTML = peopleContent;\n      messageTarget.innerHTML = isWelcome;\n    }, function(error) {\n      window.console.log('Error : ' + error);\n    });\n  };\n\n  return {\n    displayHour,\n    displayPeople,\n    getHour\n  };\n}();\n\n//modules utils\n//------------------------------\n//==============================\n// MODULE BIKE SHARING\n//==============================\n//------------------------------\n\nvar Velib = function(bikeTarget) {\n  this.bikeTarget = bikeTarget;\n};\n\nVelib.prototype = function() {\n  /***** PUBLIC *****/\n  //==== funcs ====\n  var getInformation = function() {\n\n    //variables\n    let type = 'GET';\n    let url = 'https://api.de-jaune-et-de-bleu.com/Get/bike';\n    let params = {};\n    var self = this;\n\n    //création de la promise Ajax\n    var velibRequest = new AjaxRequest(url, type);\n    var velibDeffered = velibRequest.getRequestPromise(params);\n\n    //resolution de promise\n    velibDeffered.then(function(success) {\n      //success : affichage du nombre de vélo dispos\n      var velibStation = JSON.parse(success);\n      self.bikeTarget.innerHTML = velibStation.available_bike_stands;\n    }, function(error) {\n      //Echec : message erreur\n      window.console.log('Error : ' + error);\n    });\n  };\n\n  return {\n    getInformation\n  };\n}();\n\n//modules utils\n//modules content\n//------------------------------\n//==============================\n// MODULE GENERAL FOOTER\n//==============================\n//------------------------------\n\n//EXPORT\nfunction footer(){\n  //meteo\n  var weatherTarget = document.getElementById(\"footer-weather\");\n  var tempTarget = document.getElementById(\"footer-temp\");\n\n  var forecastObj = new Forecast(weatherTarget, tempTarget);\n  forecastObj.getWeather();\n\n  //velos\n  var bikeTarget = document.getElementById(\"footer-bikes\");\n  var bikeObj = new Velib(bikeTarget);\n  bikeObj.getInformation();\n\n  //subway\n  var subwayTarget = document.getElementById(\"footer-subway\");\n  var subwayObj = new Subway(subwayTarget);\n  var deferedSubway = subwayObj.getSubwayTraffic();\n  deferedSubway.then(function(data){\n    //validation etat traffic\n\n    var wording = {\n      en: {\n        ok: \"OK\",\n        nok: \"disturbed\",\n        hs: \"out for now\"\n      },\n      fr: {\n        ok: \"à l'heure\",\n        nok: \"retardée\",\n        hs: \"hors service\"\n      }\n    };\n\n    let language = utils.getLanguage();\n\n    //ajout de l'heure pour mettre le traffic HS\n    let time = new Date();\n    var state = data.result.slug;\n    if(time.getHours() > 1 && time.getHours() < 6){\n      state = \"hors-service\";\n    }\n\n\n    if(state === \"normal\"){\n      var etat = wording[language][\"ok\"];\n    }else if(state === \"hors-service\"){\n      var etat = wording[language][\"hs\"];\n    }else{\n      var etat = wording[language][\"nok\"];\n    }\n\n    subwayTarget.innerHTML = etat;\n  });\n\n  //heure\n  var minutesTarget = document.getElementById(\"footer-minute\");\n  var hoursTarget = document.getElementById(\"footer-hour\");\n  var stateTarget = document.getElementById(\"footer-state\");\n  var welcomeTarget = document.getElementById(\"footer-welcome\");\n  var hourObj = new TimeServer(hoursTarget, minutesTarget);\n  hourObj.displayHour();\n  hourObj.displayPeople(stateTarget, welcomeTarget);\n}\n\n//------------------------------\n//------------------------------\n// MODULE GENERAL SELECT FORM\n//------------------------------\n//------------------------------\n\nvar SelectForm = function(el){\n  this.el = el;\n  this.modalTool = el.querySelector('.c-select__tool');\n  this.options = el.querySelectorAll('.c-select__values');\n  this.placeholder = el.querySelector('.c-select__placeholder');\n  this.placeholderInitWording  = this.placeholder.innerHTML;\n\n  //action\n  this.init();\n};\n\nSelectForm.prototype = function(){\n\n  //-----------------------\n  // PRIVATE\n  //-----------------------\n\n\n\n  // fonction d'event au click sur la selectbox (private)\n  var _selectboxCLick = function(e){\n    if (e.target.classList.contains('c-select__placeholder')) {\n      e.stopPropagation();\n\n      //remplacement option choisie par placeholder initial => pour savoir de quoi on parle\n      if(this.el.classList.contains('c-select--is-open')){\n        // si on a déjà fait une selection\n        if(this.selected){\n          this.placeholder.innerHTML = this.selected.textContent;\n        }\n      }else{\n        this.placeholder.innerHTML = this.placeholderInitWording;\n      }\n\n    // on click sur un item\n    }else if(e.target.classList.contains('c-select__value__wording')){\n      e.stopPropagation();\n\n      // on efface l'ancienne selection\n      if(this.selected){\n        this.selected.classList.remove('is-selected');\n      }\n\n      // rec du champs selectionné et ajout class de selectionné\n      this.selected = e.target.parentNode;\n      e.target.parentNode.classList.add(\"is-selected\");\n\n      this.el.querySelector('.c-select__tool [value=\"' + this.selected.getAttribute(\"data-value\") + '\"]').selected = true;\n\n      //remplacement option choisie dans le placeholder\n      this.placeholder.innerHTML = e.target.textContent;\n    }\n\n    // on ferme / ouvre\n    this.el.classList.toggle('c-select--is-open');\n  },\n\n\n  // BIND DES EVENTS (private)\n  _bindEvent = function(el){\n\n    let EventSelectboxClick = _selectboxCLick.bind(this);\n\n\n    //bind du click sur la select box => event delegation\n    el.addEventListener('click', EventSelectboxClick, false);\n\n  };\n\n  //-----------------------\n  // PUBLIC\n  //-----------------------\n\n  // INIT DU MODULE (public)\n  var init = function(){\n\n    _bindEvent.call(this, this.el);\n\n  };\n\n  return{\n    init\n  }\n}();\n\n//modules import\n//------------------------------\n//------------------------------\n// MODULE GENERAL CONTACT\n//------------------------------\n//------------------------------\n\n/**\n* Créer un nouveau formulaire\n* @class\n*/\nvar ContactForm = function(el = null){\n  this.el = el;\n  this.next = el.querySelectorAll('.js-formnext');\n  this.secure = false;\n\n  this.data = {\n    t: \"msg\",\n    lang: utils.getLanguage()\n  };\n};\n\nContactForm.prototype = function(){\n\n  //----------------\n  // PRIVATE\n  //----------------\n\n  // Rooting des scope formulaire (private)\n  var _sectionScopeRoute = function(section){\n\n    switch(section.getAttribute('data-section')){\n      case '1':\n        _scopeName.call(this, section);\n        break;\n\n      case '2':\n        _scopeBusinessType.call(this, section);\n        break;\n\n      case '3':\n        _scopeBusinessName.call(this, section);\n        break;\n\n      case '4':\n        _scopeMission.call(this, section);\n        break;\n\n      case '5':\n        _scopeMissionDetail.call(this, section);\n        break;\n\n      case '6':\n        _scopeMessage.call(this, section);\n        break;\n\n      case '7':\n        _scopeEmail.call(this, section);\n        break;\n    }\n  },\n\n  // fonction du scope du name\n  _scopeName = function(scope){\n\n    // rec le nom dans la variable globale\n    this.data.name = scope.querySelector('.js-formanswer').value;\n\n    // poser le nom dans la phrase suivante\n    [].slice.call( document.querySelectorAll('.formName') ).forEach( (el)=>{\n      el.innerHTML = this.data.name;\n    });\n\n    _changeQuestionNumber.call(this, scope.getAttribute(\"data-section\"));\n\n    _animationNewScope.call(this, scope);\n  },\n\n\n  // fonction du scope du business type\n  _scopeBusinessType = function(scope){\n\n    // rec le nom dans la variable globale\n     this.data.businessType = scope.querySelector('.js-formanswer').value;\n\n     var wording = {\n       en: {\n         persoNom: \"you\",\n         persoPronom: \"me\",\n         companyNom: \"this company\",\n         companyPronom: \"us\",\n         orgaNom: \"this organization\",\n         orgaPronom: \"us\",\n       },\n       fr: {\n         persoNom: \"vous\",\n         persoPronom: \"me\",\n         companyNom: \"cette entreprise\",\n         companyPronom: \"nous\",\n         orgaNom: \"cette organisation\",\n         orgaPronom: \"nous\",\n       }\n     };\n\n     switch(this.data.businessType){\n       case \"1\":\n        var businessNomination = wording[this.data.lang][\"persoNom\"];\n\n        var businessPronoun = wording[this.data.lang][\"persoPronom\"];\n       break;\n\n       case \"2\":\n         var businessNomination = wording[this.data.lang][\"companyNom\"];\n         var businessPronoun = wording[this.data.lang][\"companyPronom\"];\n       break;\n\n       case \"3\":\n       var businessNomination = wording[this.data.lang][\"orgaNom\"];\n       var businessPronoun = wording[this.data.lang][\"orgaPronom\"];\n       break;\n\n       default:\n         var businessNomination = wording[this.data.lang][\"orgaNom\"];\n         var businessPronoun = wording[this.data.lang][\"orgaPronom\"];\n       break;\n     }\n\n     // poser le nom dans la phrase suivante\n     document.getElementById('businessNomination').innerHTML = businessNomination;\n     document.getElementById('businessPronoun').innerHTML = businessPronoun;\n\n     // changement numéro question\n     _changeQuestionNumber.call(this, scope.getAttribute(\"data-section\"));\n     _animationNewScope.call(this, scope);\n\n  },\n\n  // fonction du scope du business name\n  _scopeBusinessName = function(scope){\n\n    // rec le nom dans la variable globale\n     this.data.businessName = scope.querySelector('.js-formanswer').value;\n\n    // changement numéro question\n    _changeQuestionNumber.call(this, scope.getAttribute(\"data-section\"));\n    _animationNewScope.call(this, scope);\n  },\n\n  // fonction du scope de la mission\n  _scopeMission = function(scope){\n\n    // rec le nom dans la variable globale\n     this.data.mission = scope.querySelector('.js-formanswer').value;\n\n     // affichage des détails de mission en fonction du choix de la mission\n     let switcher = document.getElementById('form-switchMissionDetails');\n\n     //reset style de la liste\n     [].slice.call( switcher.querySelectorAll('li') ).forEach( function(el) {\n       el.style.display = \"block\";\n     });\n\n     //modif\n     switch(this.data.mission){\n      case \"1\":\n        [].slice.call( switcher.querySelectorAll('li:nth-child(-n+4)') ).forEach( function(el) {\n          el.style.display = \"none\";\n        });\n        break;\n\n      case \"2\":\n        [].slice.call( switcher.querySelectorAll('li:nth-child(n+5):nth-child(-n+6)') ).forEach( function(el) {\n          el.style.display = \"none\";\n        });\n        break;\n\n      case \"3\":\n        [].slice.call( switcher.querySelectorAll('li:nth-child(n+4):nth-child(-n+6)') ).forEach( function(el) {\n          el.style.display = \"none\";\n        });\n        break;\n\n      case \"4\":\n        [].slice.call( switcher.querySelectorAll('li:nth-child(n+5):nth-child(-n+6)') ).forEach( function(el) {\n          el.style.display = \"none\";\n        });\n        break;\n\n      case \"5\":\n        [].slice.call( switcher.querySelectorAll('li:nth-child(n+5):nth-child(-n+6)') ).forEach( function(el) {\n          el.style.display = \"none\";\n        });\n        break;\n\n     }\n\n     // changement numéro question\n     _changeQuestionNumber.call(this, scope.getAttribute(\"data-section\"));\n     _animationNewScope.call(this, scope);\n  },\n\n  // fonction du scope du business name\n  _scopeMissionDetail = function(scope){\n\n    // rec le nom dans la variable globale\n     this.data.missionDetails = scope.querySelector('.js-formanswer').value;\n\n     // changement numéro question\n     _changeQuestionNumber.call(this, scope.getAttribute(\"data-section\"));\n     _animationNewScope.call(this, scope);\n  },\n\n  // fonction du scope du message\n  _scopeMessage = function(scope){\n\n    // rec le nom dans la variable globale\n    this.data.message = scope.querySelector('.js-formanswer').value;\n\n    // changement numéro question\n    _changeQuestionNumber.call(this, scope.getAttribute(\"data-section\"));\n    _animationNewScope.call(this, scope);\n  },\n\n  // fonction du scope de l'email (private)\n  _scopeEmail = function(scope){\n\n    let formAnswer = scope.querySelector('.js-formanswer');\n    let buttonNext = scope.querySelector('.js-formnext');\n    let icoError = scope.querySelector('.js-formerror');\n\n\n    /** fonction de validation email à la frappe */\n    let validEmail = function(){\n      if(_testEmail(formAnswer.value)){\n        formAnswer.classList.remove(\"contactform__answer--wrong\");\n        buttonNext.classList.remove(\"m-nodisplay\");\n        icoError.classList.add(\"m-nodisplay\");\n\n\n        formAnswer.removeEventListener('keyup', formAnswer, false);\n      }\n    };\n\n    /** rec le nom dans la variable globale */\n    if(_testEmail(formAnswer.value)){\n      this.data.email = formAnswer.value;\n      formAnswer.classList.remove(\"contactform__answer--wrong\");\n\n      let ajaxForm = new AjaxRequest(\"https://api.de-jaune-et-de-bleu.com/Post/contact\");\n      ajaxForm.postRequestPromise(this.data).then(res=>{\n        console.log('message sent'); // mettre ici le passage au message d'envoi (ou non -> sauvegarde);\n      });\n\n      /** animation */\n      _animationNewScope.call(this, scope);\n\n    }else{\n\n      buttonNext.classList.add(\"m-nodisplay\");\n      icoError.classList.remove(\"m-nodisplay\");\n\n      formAnswer.classList.add(\"contactform__answer--wrong\");\n      formAnswer.addEventListener('keyup', validEmail, false);\n    }\n  },\n\n\n  // desactiver la touche enter sur le formulaire pour eviter envois non désirés (private)\n  _disableEnterEventer = function(){\n    let answersInputs = this.el.querySelectorAll('.js-formanswer');\n\n    this.el.addEventListener('keypress', e=>{\n      if(e.keyCode == 13 && !e.target.classList.contains(\"js-formanswerText\") ){ //enter hors textarea\n        e.preventDefault();\n\n        if(this.secure === true){\n          // simule le click pour envoyer la réponse\n          e.target.blur(); //quiter le champs lors du click sur enter\n          _sectionScopeRoute.call(this, utils.findAncestor(e.target, \"contactform__group\"));\n        }\n\n      }\n    }, false);\n  },\n\n  // changer le numéro de la question (private)\n  _changeQuestionNumber = function(num){\n    const firstItem = this.el.querySelector('.counter__item--first');\n    firstItem.innerHTML = (parseInt(num) + 1) ;\n  },\n\n\n\n  /**\n  * fonction pour valider ecriture email (private)\n  * @param {string} email - structure email à valider\n  * @returns {boolean}\n  */\n  _testEmail = function(email){\n    let re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(email);\n  },\n\n\n\n  /**\n   * _apparitionNextButton - apparition du bouton suivant (private)\n   * @param  {nodelist} scope - scope courant\n   * @param  {boolean} appear - apparition ou disparition\n   */\n  _nextButton = function(scope, appear){\n    let buttonContainer = scope.querySelector('.js-formnext');\n    let buttonShape = buttonContainer.querySelector('.ico-arrow-poly');\n\n    buttonContainer.classList.remove(\"m-opty0\");\n\n    //scenario animation\n    let animation = anime.timeline();\n    animation.add({\n      targets: buttonContainer,\n      duration: 400,\n      easing: \"easeInCirc\",\n      opacity: [0,1]\n    })\n    .add({\n      targets: buttonShape,\n      duration: 400,\n      offset: \"-=100\",\n      easing: [0,1.18,.76,1.32],\n      translateX: [-60, 0],\n      points: [\n        {value: \"35,7 90,60 35,113\"},\n        {value: \"40,2 90,60 40,118\"},\n        {value: \"35,7 90,60 35,113\"}\n      ]\n    });\n\n    if(appear){\n      animation.play();\n    }else{\n      animation.reverse();\n    }\n  },\n\n\n\n  /**\n   * _observer - fonction de création d'un observer (placement en utils ?) (private)\n   * @param  {nodelist} el       - element à observe\n   * @param  {callback} callback - callback à appliquer lorsque un changement est apparu\n   */\n  _observer = function(el, callback){\n\n    // création d'un observer pour vérifier changement DOM listes\n    let observer = new MutationObserver(function(mutations) {\n      mutations.forEach(function(mutation) {\n        //Action\n        callback(mutation, observer);\n      });\n    });\n\n    //observation\n    observer.observe(el, {childList: true, characterData : true, attributes: true});\n  },\n\n\n\n  /**\n   * _observerSelect - callback pour observer (private)\n   * @param  {type} mutation - mutation à observer\n   * @param  {type} observer - objet observer\n   */\n  _observerSelect = function(mutation, observer){\n\n    let wording = {\n      en: \"- choose -\",\n      fr: \"- choisir -\"\n    };\n\n    if(mutation.target.innerHTML != wording[this.data.lang]){\n      _nextButton(utils.findAncestor(mutation.target, \"contactform__group\"), true);\n      this.secure = true;\n      observer.disconnect(); //fin\n    }\n  },\n\n\n\n  /**\n   * _enableAnswerObserver - fonction pour débuter l'observation des réponses  (private)\n   */\n  _enableAnswerObserver = function(){\n\n    let inputs = this.el.querySelectorAll('.js-formanswer:not(select):not(textarea), .c-select__placeholder');\n\n    for(let i = 0; i < inputs.length; i++ ){\n      if(inputs[i].nodeName.toLowerCase() === \"span\"){\n\n        //observer pour les listes (pas d'event sur les nodes de textes)\n        _observer.call(this, inputs[i], _observerSelect.bind(this));\n      }else{\n        let j = 0;\n\n        //event pour les inputs et txtarea\n        inputs[i].addEventListener(\"input\",e=>{\n\n          if(e.target.value.length === 0){\n            _nextButton(utils.findAncestor(inputs[i], \"contactform__group\"), false);\n            this.secure = false;\n\n          }else if(e.target.value.length === 1 && j < 1 || this.secure === false){\n            _nextButton(utils.findAncestor(inputs[i], \"contactform__group\"), true);\n            this.secure = true;\n          }\n\n          // reset ancienne valeur\n          j = e.target.value.length;\n        }, false);\n\n      }\n    }\n  },\n\n\n\n\n\n\n  /**\n  * fonction d'animation des textes du formulaire (private)\n  * @param {string} scope - scope à animer\n  */\n  _animationAppear = function(scope){\n\n    /** params texte */\n    let animation = {};\n\n    animation.writters = scope.querySelectorAll(\".contactform__writter\");\n    animation.question = scope.querySelector(\".js-question\");\n    animation.answer = scope.querySelector(\".js-answer\");\n    animation.answerInput = scope.querySelector(\".js-formanswer, .c-select__placeholder\");\n\n    /** decomposition char */\n    utils.charming(animation.question, { classPrefix: \"letter char\" });\n    animation.questionChars = animation.question.querySelectorAll('.letter');\n\n    if(animation.answer !== null){\n      utils.charming(animation.answer, { classPrefix: \"letter char\" });\n      animation.answerChars = animation.answer.querySelectorAll('.letter');\n    }\n\n\n    /** params animation */\n    const animeParam = {\n      letters: {\n        speed: 26,\n        duration: 50\n      },\n      writter: {\n        duration: 1000,\n        delay: 500\n      }\n    };\n\n    scope.style.display = \"block\";\n\n    /** animation timeline */\n    let formAnimation = anime.timeline({autoplay: true});\n    formAnimation.add({ //apparition name\n      targets: animation.writters[0],\n      opacity: [0,1],\n      translateY: [50, 0],\n      easing: \"easeOutElastic\",\n      elasticity: 100,\n      duration: animeParam.writter.duration,\n      delay: animeParam.writter.delay\n    })\n    .add({ //apparition question\n      targets: animation.questionChars,\n      opacity: [0,1],\n      easing: \"linear\",\n      duration: animeParam.letters.duration,\n      delay: function(el, i){\n        return animeParam.letters.speed * (i+1);\n      }\n    })\n    .add({ //apparition 2e writter\n      targets: animation.writters[1],\n      opacity: [0,1],\n      translateY: [50, 0],\n      easing: \"easeOutElastic\",\n      elasticity: 100,\n      duration: animeParam.writter.duration,\n      delay: animeParam.writter.delay\n    })\n    .add({\n      targets: animation.answerChars,\n      opacity: [0,1],\n      easing: \"easeOutExpo\",\n      duration: 50,\n      delay: function(el, i) {\n        return animeParam.letters.speed * (i+1);\n      }\n    })\n    .add({ //apparition barre\n      targets: animation.answerInput,\n      scaleX: [0,1],\n      easing: \"easeOutExpo\",\n      duration: 600,\n      offset: '+=20',\n      complete: function(){\n        //Selection de l'input\n        if(animation.answerInput){\n          if(animation.answerInput.nodeName.toLowerCase() === \"input\" || animation.answerInput.nodeName.toLowerCase() === \"textarea\"){\n            // animation.answerInput.focus(); => recardre la page\n            animation.answerInput.select();\n          }\n        }\n      }\n    });\n\n  },\n\n\n\n  /**\n   * _animationNewScope - animation au fadeout après validation d'une étape\n   * @param  {nodelist} scope scope a effacer\n   */\n  _animationNewScope = function(scope){\n\n    this.secure = false;\n\n    let tl = anime.timeline();\n    tl.add({\n      targets: scope,\n      duration: 800,\n  //    easing: [.3,-0.42,.81,.04],\n      easing: \"easeInSine\",\n      //elasticity: 400,\n      // translateY: -70,\n      translateY: [\n        {value: 70},\n        {value: -70}\n      ],\n      opacity: 0,\n      complete: function(){\n        setTimeout(()=>{\n          scope.style.display = \"none\";\n          _animationAppear(scope.nextElementSibling);\n        }, 500);\n      }\n    });\n\n    // tl.finished.then(()=>{\n    //\n    // });\n\n  };\n\n\n  //----------------\n  // PUBLIC\n  //----------------\n\n  // fonction d'initialisation (public)\n  var init = function(){\n\n    // detecter toutes les select box\n    [].slice.call( document.querySelectorAll('.c-select') ).forEach( function(el) {\n      new SelectForm(el);\n    });\n\n    // click sur les étapes\n    for(let i = 0; i < this.next.length ; i++){\n      this.next[i].addEventListener('click', e=>{\n\n        // parent node pour avoir le scope de la question au dessus du bouton\n        _sectionScopeRoute.call(this, utils.findAncestor(this.next[i], \"contactform__group\"));\n      });\n    }\n\n    // desactiver l'envoi du formulaire sur enter\n    _disableEnterEventer.call(this);\n\n    //animation du contenu\n    _animationAppear(this.el.querySelector(\".contactform__group\"));\n\n\n    //apparition des boutons next\n    _enableAnswerObserver.call(this);\n\n  };\n\n  return{\n    init\n  }\n}();\n\nvar bundle = (function(){\n\n  // navigationUI (private)\n  var navigation = {\n\n    config: {\n      navigationEl : document.querySelectorAll('.menu') || null,\n      contactFormEl : document.getElementById('contactForm') || null\n\n    },\n\n    init: function(){\n      if(this.config.navigationEl != null){  // load and init module\n        for(let i = 0; i < this.config.navigationEl.length; i++){ //pas de boucle ici nirmalement\n          var navigation = new Navigation(this.config.navigationEl[i]);\n          navigation.init();\n        }\n\n         return navigation;\n      }\n    }\n  };\n\n\n  // contact formulaire (private)\n  var contactForm = {\n\n    config: {\n      contactFormEl : document.getElementById('contactForm') || null\n    },\n\n    init: function(){\n      if(this.config.contactFormEl != null){  // load and init module          var contactForm = new Navigation(this.config.navigationEl[i]);\n        var contactForm = new ContactForm(this.config.contactFormEl);\n        contactForm.init();\n      }\n    }\n  };\n\n  var BindUIActions = {\n\n    config: {},\n\n    init: function(){\n      this.config.navigation = navigation.init(); //bind navigation (closure)\n      contactForm.init();// contact\n      // footer\n      // introAnimation\n      // scroller\n      // animation texte\n      // script Tag manager macro\n    },\n\n    resize: function(){\n      window.addEventListener(\"resize\", ()=>{\n\n        //call tous les resizeEvent\n        this.config.navigation.resize();\n\n        //actualisation effective de la largeur écran apres resize\n        if(window.innerWidth !== utils.viewportWidth ){\n          utils.viewportWidth = window.innerWidth;\n        }\n\n      }, false);\n    }\n  };\n\n  //----------------\n  // Initilisation\n  //----------------\n\n  //INIT GLOBAL\n  window.addEventListener(\"DOMContentLoaded\", function(event) {\n\n    footer();\n    BindUIActions.init();\n    BindUIActions.resize();\n\n\n    // // Polyfill\n    // if (!window.Promise) {\n    //   window.Promise = Promise;\n    // }\n\n\n  }, false);\n\n})();\n\n}());\n","var utils = {\n\n  viewportWidth : window.innerWidth,\n\n\n\n  //-----------------------------\n  // THROTTLE FUNC\n  //-----------------------------\n\n  throttle : function(callback, delay) {\n    var last;\n    var timer;\n    return function () {\n        var context = this;\n        var now = +new Date();\n        var args = arguments;\n        if (last && now < last + delay) {\n            // le délai n'est pas écoulé on reset le timer\n            clearTimeout(timer);\n            timer = setTimeout(function () {\n                last = now;\n                callback.apply(context, args);\n            }, delay);\n        } else {\n            last = now;\n            callback.apply(context, args);\n        }\n    };\n  },\n\n\n  //-----------------------------\n  // DEBOUNCE FUNC\n  //-----------------------------\n\n  debounce: function(func, wait, immediate) {\n  \tvar timeout;\n  \treturn function() {\n  \t\tvar context = this, args = arguments;\n  \t\tvar later = function() {\n  \t\t\ttimeout = null;\n  \t\t\tif (!immediate) func.apply(context, args);\n  \t\t};\n  \t\tvar callNow = immediate && !timeout;\n  \t\tclearTimeout(timeout);\n  \t\ttimeout = setTimeout(later, wait);\n  \t\tif (callNow) func.apply(context, args);\n  \t};\n  },\n\n\n  //-----------------------------\n  // CREATE PROMISE FOR TL\n  //-----------------------------\n\n  //tl = timeline a observer\n  // e = event de callback => (ex: \"onComplete\"...)\n  createTlPromise : function(tl, e){\n    return new Promise((resolve)=>{\n      tl.eventCallback(e, function() {\n        resolve(true)\n      })\n    });\n  },\n\n\n  //-----------------------------\n  // RESPONSIVE FUNC\n  //-----------------------------\n\n  //ordre du callback : responsive ORD, responsive TAB, responsive MOB\n\n  matchesMediaQuery : function(callbackObj){\n    const xs = window.matchMedia(\"(min-width: 0px)\");\n    const sm = window.matchMedia(\"(min-width: 768px)\");\n    const md = window.matchMedia(\"(min-width: 1024px)\");\n\n\n    // check obj de callback\n    for(let property in callbackObj){\n\n      if(md.matches && property === 'md'){\n\n          return callbackObj[property](); //callback pour ord\n\n      }else if(sm.matches && property === 'sm'){\n\n          return callbackObj[property](); //callback pour tab\n\n      }else if(xs.matches && property === 'xs'){\n\n          return callbackObj[property](); //callback pour mob\n\n      }\n    }\n  },\n\n  getLanguage: function(){\n    return document.documentElement.getAttribute('lang');\n  },\n\n  findAncestor: function(el, cls) {\n    while ((el = el.parentElement) && !el.classList.contains(cls));\n    return el;\n  },\n\n  // CHARMING JS via https://github.com/yuanqing/charming/blob/master/index.js\n  charming: function(element, options){\n    options = options || {}\n\n    var tagName = options.tagName || 'span'\n    var classPrefix = options.classPrefix != null ? options.classPrefix : 'char'\n    var count = 1\n\n    function inject (element) {\n      var parentNode = element.parentNode\n      var string = element.nodeValue\n      var length = string.length\n      var i = -1\n      while (++i < length) {\n        var node = document.createElement(tagName)\n        if (classPrefix) {\n          node.className = classPrefix + count\n          count++\n        }\n        node.appendChild(document.createTextNode(string[i]))\n        parentNode.insertBefore(node, element)\n      }\n      parentNode.removeChild(element)\n    }\n\n    ;(function traverse (element) {\n      // `element` is itself a text node.\n      if (element.nodeType === Node.TEXT_NODE) {\n        return inject(element)\n      }\n\n      // `element` has a single child text node.\n      var childNodes = Array.prototype.slice.call(element.childNodes) // static array of nodes\n      var length = childNodes.length\n      if (length === 1 && childNodes[0].nodeType === Node.TEXT_NODE) {\n        return inject(childNodes[0])\n      }\n\n      // `element` has more than one child node.\n      var i = -1\n      while (++i < length) {\n        traverse(childNodes[i])\n      }\n    })(element)\n  }\n};\n\n\n\nexport { utils };\n","//modules utils\nimport { utils } from '../../utils/helpers.js';\n\n\n\n//------------------------------\n//------------------------------\n// MODULE GENERAL NAVIGATION\n//------------------------------\n//------------------------------\n\nvar Navigation = function(el){\n\n  //composants DOM\n  this.nav = el;\n  this.button = el.querySelector('.js-nav-button'); //bouton à actionner\n  this.buttonUI = el.querySelector('.js-nav-trigger');\n\n}\n\n\nNavigation.prototype = function(){\n\n  //-----------------------\n  // PRIVATE\n  //-----------------------\n\n  //GLOBALES\n  var animationProgress = 0,\n  scrollEventCallbackBinded = null,\n  firstLoad = true,\n  currentY;\n\n\n  // ANIMATION TWEENMAX (private)\n  var _configAnimation = function(){\n\n    /* Elements du DOM */\n    var buttonIcons = this.nav.querySelector('.js-menu-trigger'),\n    buttonIconList = this.nav.querySelectorAll('.menu-trigger__ico__bar'),\n    menu = this.nav.querySelector('.js-nav-menu'),\n    menuLinks = menu.querySelectorAll('.menu-nav__list__item'),\n    menuLang = menu.querySelector('.menu-nav__langs');\n\n\n    this.animation = new TimelineMax({paused:true});\n\n    //scenario de l'animation\n    this.animation\n    .fromTo(this.nav, .25, {className: \"-=a-nav-open\"}, {className: \"+=a-nav-open\", ease: Sine.easeInOut})\n    .fromTo(buttonIconList[0], .3, {className: \"-=a-ico-open\"}, {className: \"+=a-ico-open\", ease: Sine.easeOut}, 0.1)\n    .fromTo(buttonIconList[1], .3, {className: \"-=a-ico-open\"}, {className: \"+=a-ico-open\", ease: Sine.easeOut}, \"-=.2\")\n    .fromTo(buttonIconList[2], .3, {className: \"-=a-ico-open\"}, {className: \"+=a-ico-open\", ease: Sine.easeOut}, \"-=.35\")\n\n    .add(\"click\")\n    .fromTo(menu, .6, {className: \"-=a-menu-expend\"}, {className: \"+=a-menu-expend\", ease: Power2.easeOut})\n    .fromTo(buttonIcons, .1, {height: \"50%\"}, {height: \"100%\", ease: Power0.easeNone}, \"-=.5\")\n    .set(this.buttonUI, {className: \"+=a-ui-expend\"})\n    .staggerFromTo(menuLinks, .35, {className: \"-=a-menu__item-expend\"}, {className: \"+=a-menu__item-expend\", ease: Sine.easeOut}, .2)\n    .add(\"openNav\")\n    .fromTo(menuLang, .6, {className: \"-=a-menu__item-expend\"}, {className: \"+=a-menu__item-expend\", ease: Sine.easeOut}, '-=.2')\n\n    //mise en place de la scene à la bonne séquence\n    this.animation.progress(animationProgress);\n\n\n    //check home page ou non => la nav doit être visible sur la nav uniquement\n    if(document.body.classList.contains('home')){\n      utils.matchesMediaQuery(\n        {\n          sm: ()=>{\n            if(firstLoad === true){\n\n              //ouverture\n              // this.animation.progress(1); //desactivé pour jouer l'ouverture au chargement\n\n              this.buttonUI.setAttribute('aria-expanded', 'true');\n\n              //timeout pour eviter lag de début (pas css chargé encore) => on peut voir load au lieu de domcontentloaded dans le script ?\n              setTimeout(()=>{\n                _play.call(this);\n              }, 500);\n\n\n              //ajout de la fermeture auto au 1er load page home\n              _enableScrollEvent.call(this);\n\n              //drapeau\n              firstLoad = false;\n            }\n\n          },\n          xs: ()=>{\n            this.animation.progress(0);\n            this.buttonUI.setAttribute('aria-expanded', 'false') ;\n\n          }\n        }\n      );\n    }\n  },\n\n\n  // LANCEMENT ANIMATION (private)\n  _play = function(){\n    this.animation.timeScale(1);\n    this.animation.play();\n  },\n\n\n  // RETOUR ARIERRE ANIMATION (private)\n  _reverse = function(){\n    this.animation.removePause(\"click\");\n    this.animation.timeScale(1.5);\n\n    // this.animation.seek('openNav'); //saut avant l'apparition des items\n    this.animation.reverse();\n  },\n\n\n  //FONCTION DE CALLBACK AU SCROLL (private)\n  _scrollEventCallback = function(){\n\n    // vérifie si on slide plus de 200px vers le haut ou bas\n    if(currentY > (window.pageYOffset + 200) || currentY < (window.pageYOffset - 200)){\n\n      //on ferme la nav\n      _reverse.call(this);\n\n      //on ferme l'ARIA flag\n      this.buttonUI.setAttribute('aria-expanded', 'false') ;\n\n      //on retire l'event\n      window.removeEventListener('scroll', scrollEventCallbackBinded, false);\n      scrollEventCallbackBinded = null; //reset le bind pour eviter conflit entre click et scroll\n    }\n  },\n\n\n  //ACTIVATION DE L'EVENT DE SCROLL (private)\n  _enableScrollEvent = function(){\n    // activation fermeture scroll\n    currentY = window.pageYOffset;\n\n    //si l'event de scroll n'est pas encore instancié\n    if(scrollEventCallbackBinded === null){\n      scrollEventCallbackBinded = _scrollEventCallback.bind(this);\n    }\n\n    window.addEventListener('scroll', scrollEventCallbackBinded, false);\n\n  },\n\n\n  // ACTION CLICK (private)\n  _navigationAction = function(e){\n\n    //ARIA activé ou non\n    this.buttonUI.getAttribute('aria-expanded') === \"true\" ? this.buttonUI.setAttribute('aria-expanded', 'false') : this.buttonUI.setAttribute('aria-expanded', 'true');\n\n\n    //nav fermé => on ouvre\n    if(this.buttonUI.getAttribute('aria-expanded') === \"true\"){\n\n      // si l'animation hover est en cours, on retire le break pour la laisser fini jusqu'au bout\n      if(this.animation.isActive()){\n\n        this.animation.removePause(\"click\");\n\n      }else{\n        _play.call(this);\n      }\n\n      //activation de l'event de scroll\n      _enableScrollEvent.call(this);\n\n\n    // nav déja etendu => on close\n    }else{\n      window.removeEventListener('scroll', scrollEventCallbackBinded, false);\n      scrollEventCallbackBinded = null; //reset le bind pour eviter conflit entre click et scroll\n      _reverse.call(this);\n    }\n  },\n\n\n  // ACTION HOVER ENTER (private)\n  _navigationEnter = function(){\n\n    //si la nav est fermée\n    if(this.buttonUI.getAttribute('aria-expanded') === \"false\"){\n      this.animation.timeScale(1);\n      this.animation.play();\n      this.animation.addPause(\"click\");\n    }else{\n\n      //effet de hover\n      // this.nav.querySelector('.menu-trigger__ico').classList.add(\"a-ico-hover\");\n\n    }\n  },\n\n\n  // ACTION HOVER OUT (private)\n  _navigationOut = function(){\n\n    // si nav fermée, on peut close la languette\n    if(this.buttonUI.getAttribute('aria-expanded') === \"false\"){\n\n      this.animation.reverse();\n\n    }else{\n\n      //hover nav fermée\n      // this.nav.querySelector('.menu-trigger__ico').classList.remove(\"a-ico-hover\");\n\n    }\n  },\n\n\n  // BIND DES EVENTS (private)\n  _bindEvent = function(el){\n\n    let EventNavigationEnter = _navigationEnter.bind(this);\n    let EventNavigationOut = _navigationOut.bind(this);\n    let EventNavigationAction = _navigationAction.bind(this);\n    let timeout; //debounce\n\n    el.addEventListener('mouseenter', EventNavigationEnter, false);\n    el.addEventListener('mouseleave', EventNavigationOut, false);\n    el.addEventListener('click', EventNavigationAction, false);\n\n\n    //EVENT RESIZE OLD => Maintenant dans le script via public method\n\n    //debounce\n    // var resizeEvent = utils.debounce(()=>{\n    //\n    //   console.log(utils.viewportWidth);\n    //   console.log(window.innerWidth)\n    //\n    //   // si la largeur de l'écran à bien changé (toolbar iphone change hauteur)\n    //   if(window.innerWidth !== utils.viewportWidth){\n    //\n    //     console.log(\"ici\");\n    //\n    //     let isActive = this.animation.isActive();\n    //\n    //     //sauvegarde de la scene en cour\n    //     animationProgress = this.animation.progress();\n    //\n    //     //destruction de la timeline\n    //     this.animation.kill();\n    //\n    //     //construciton d'une nouvelle animation\n    //     _configAnimation.call(this);\n    //\n    //     //active l'animation si elle était en cours\n    //     isActive && this.animation.play();\n    //\n    //   }\n    //\n    //\n    // }, 250);\n\n  //  window.addEventListener(\"resize\", resizeEvent.bind(this), false);\n  };\n\n\n  //-----------------------\n  // PUBLIC\n  //-----------------------\n\n  // INIT DU MODULE (public)\n  var init = function(){\n    _bindEvent.call(this, this.button);\n    _configAnimation.call(this);\n  },\n\n  resize = function(){\n\n\n    // si la largeur de l'écran à bien changé (toolbar iphone change hauteur)\n    if(window.innerWidth !== utils.viewportWidth){\n\n      let isActive = this.animation.isActive();\n\n      //sauvegarde de la scene en cour\n      animationProgress = this.animation.progress();\n\n      //destruction de la timeline\n      this.animation.kill();\n\n      //construciton d'une nouvelle animation\n      _configAnimation.call(this);\n\n      //active l'animation si elle était en cours\n      isActive && this.animation.play();\n\n    }\n  };\n\n  return {\n    init,\n    resize\n  }\n}();\n\n\n//EXPORT\nexport { Navigation };\n","\n/*******************************\n-------- AJAX\n*******************************/\nvar AjaxRequest = function(url) {\n    this.url = url;\n};\n\nAjaxRequest.prototype = function() {\n    //request by GET : URI / no PARAMS\n    var getRequestPromise = function(uri) {\n        this.type = 'GET';\n        this.params = null;\n\n        if (uri !== undefined) {\n            var uriContent = '';\n            for (var props in uri) {\n                if (props === Object.keys(uri)[0]) {\n                    uriContent = uriContent + props + '=' + uri[props];\n                } else {\n                    uriContent = uriContent + '&' + props + '=' + uri[props];\n                }\n            }\n            this.uri = '?' + uriContent;\n        } else {\n            this.uri = \"\";\n        }\n\n        return requestPromise.call(this);\n    };\n\n    //request by POST : no URI / PARAMS\n    var postRequestPromise = function(uri) {\n        this.type = 'POST';\n        this.params = uri;\n        this.uri = \"\";\n\n        return requestPromise.call(this);\n    };\n\n    //requete\n    var requestPromise = function() {\n\n        return new Promise((resolve, reject)=>{\n            var xhr = new XMLHttpRequest();\n\n            xhr.open(this.type, this.url + this.uri, true);\n            xhr.send(JSON.stringify(this.params));\n\n            return requestResponsePromise(xhr, resolve, reject);\n        });\n    };\n    var requestResponsePromise = function(xhr, resolve, reject) {\n        xhr.onreadystatechange = function() {\n            if (xhr.readyState === 4) {\n                if (xhr.status === 200) {\n                    resolve(xhr.response);\n                } else {\n                    reject(Error('Error: ' + xhr.status));\n                }\n            }\n        };\n        xhr.onerror = function() {\n            reject(Error('There was a network error.'));\n        };\n    };\n\n    return {\n        getRequestPromise,\n        postRequestPromise\n    };\n}();\n\nexport { AjaxRequest };\n","//modules utils\nimport { AjaxRequest } from '../../utils/promises-ajax.js';\nimport { utils } from '../../utils/helpers.js';\n\n//------------------------------\n//==============================\n// MODULE FORECASTING\n//==============================\n//------------------------------\n\n/***********\n INIT\n ***********/\nvar Forecast = function(weatherTarget, tempTarget) {\n  this.weatherTarget = weatherTarget; //element DOM à remplacer pour la météo\n  this.tempTarget = tempTarget; //element DOM à remplacer pour la temperature\n}\n\n/***********\n PROTOTYPE\n ***********/\nForecast.prototype = function() {\n\n/***** GLOBALES *****/\n  var wording = {\n    en: {\n      Rain: \"rainy\",\n      Clear: \"sunny\",\n      Clouds: \"cloudy\",\n      Atmosphere: \"misty\",\n      Snow: \"snowy\",\n      Thunderstorm: \"stormy\",\n      Extreme: \"danger\"\n    },\n    fr: {\n      Rain: \"pluvieux\",\n      Clear: \"soleil\",\n      Clouds: \"nuageux\",\n      Atmosphere: \"brumeux\",\n      Snow: \"enneigé\",\n      Thunderstorm: \"tempête\",\n      Extreme: \"danger\"\n    }\n  };\n\n  /***** PRIVATES *****/\n  //==== utils ===\n  var url = \"https://api.de-jaune-et-de-bleu.com/Get/weather\"; //url de requete API\n\n  //==== funcs ====\n  //Func pour enregistrer les datas AJAX\n  var _storeWeatherData = function(data, self) {\n    //rec\n    self.weatherData = Forecast.prototype.weatherData = JSON.parse(data);\n    //display\n    _displayWeather.call(self);\n  };\n\n  //Func pour afficher la météo dans le DOM\n  var _displayWeather = function() {\n    //temperature\n    this.tempTarget.innerHTML = ` ${this.weatherData.main.temp.toFixed(1)} <sup>°</sup>C`;\n    //météo\n    let weatherWording;\n    let language = utils.getLanguage();\n\n    switch (this.weatherData.weather[0].main) {\n      case \"Rain\":\n        weatherWording = wording[language][\"Rain\"];\n        break;\n      case \"Clear\":\n        weatherWording = wording[language][\"Clear\"];\n        break;\n      case \"Clouds\":\n        weatherWording = wording[language][\"Clouds\"];\n        break;\n      case \"Atmosphere\":\n        weatherWording = wording[language][\"Atmosphere\"];\n        break;\n      case \"Snow\":\n        weatherWording = wording[language][\"Snow\"];\n        break;\n      case \"Thunderstorm\":\n        weatherWording = wording[language][\"Thunderstorm\"];\n        break;\n      case \"Extreme\":\n        weatherWording = wording[language][\"Extreme\"];\n        break;\n      default:\n        weatherWording = wording[language][\"Rain\"];\n    }\n\n    this.weatherTarget.innerHTML = weatherWording;\n  };\n\n  /***** PUBLIC *****/\n  //==== funcs ====\n\n  //Func pour récupérer l'API météo par Ajax\n  var getWeather = function() {\n    //variables\n    let type = 'GET';\n    let params = {};\n    var self = this;\n\n    //création de la promise Ajax\n    var weatherRequest = new AjaxRequest(url, type);\n    var weatherDeffered = weatherRequest.getRequestPromise(params);\n\n    //resolution de promise\n    weatherDeffered.then(function(success) {\n      //Succès : fonction d'enregistrement des datas\n      _storeWeatherData(success, self);\n    }, function(error) {\n      //Echec : message erreur\n      window.console.log('Error : ' + error);\n    });\n  };\n\n  return {\n    getWeather\n  };\n}();\n\nexport { Forecast };\n","//modules utils\nimport { AjaxRequest } from '../../utils/promises-ajax.js';\n\n//------------------------------\n//==============================\n// MODULE SUBWAY\n//==============================\n//------------------------------\n\nvar Subway = function(subwayTarget) {\n    this.subwayTargete = \"test\";\n};\n\nSubway.prototype = function() {\n\n  /***** PUBLIC *****/\n  //==== funcs ====\n  //Func pour récupérer l'état du traffc de la ligne 2 du métro parisien\n  var getSubwayTraffic = function() {\n\n    //variables\n    let type = 'GET';\n    let url = \"https://api.de-jaune-et-de-bleu.com/Get/subway\";\n    let params = {};\n\n    //création de la promise Ajax\n    var trafficRequest = new AjaxRequest(url, type);\n    var trafficDeffered = trafficRequest.getRequestPromise(params);\n\n    //resolution de promise\n    return trafficDeffered.then(function(success) {\n      //success : affichage l'état du service\n      var ratpApi = new Promise(function(resolve, rejected) {\n        var traffic = JSON.parse(success);\n        if (success) {\n          resolve(traffic);\n        } else {\n          rejected(\"error\");\n        }\n      });\n      return ratpApi;\n\n    }, function(error) {\n      //Echec : message erreur\n      window.console.log('Error : ' + error);\n    });\n  };\n\n  return {\n    getSubwayTraffic\n  };\n}();\n\nexport { Subway };\n","//modules utils\nimport { AjaxRequest } from '../../utils/promises-ajax.js';\nimport { utils } from '../../utils/helpers.js';\n\n\n//------------------------------\n//==============================\n// MODULE HOUR\n//==============================\n//------------------------------\n\n//POTENTIEL SOURCEZ LEAK MEMORY : peut etre actualiser toutes les minutes et non secondes\n\nvar TimeServer = function(hour, min) {\n  this.hour = hour;\n  this.min = min;\n};\n\nTimeServer.prototype = function() {\n\n  /***** GLOBALES *****/\n\n  var wording = {\n    en: {\n      matin: \"work work work\",\n      midi: \"lunch time!\",\n      apresmidi: \"let's meet!\",\n      soir: \"have a drink?\",\n      nuit: \"time to get rest\",\n      weekend: \"back on Monday!\",\n\n      ouvert: \"you are welcome\",\n      fermee: \"see you soon\"\n    },\n    fr: {\n      matin: \"au boulot !\",\n      midi: \"la pause sacrée\",\n      apresmidi: \"voyons-nous !\",\n      soir: \"un verre ?\",\n      nuit: \"un peu de repos\",\n      weekend: \"de retour lundi !\",\n\n      ouvert: \"bienvenue à l'atelier\",\n      fermee: \"on se voit bientôt ?\"\n    }\n  };\n\n\n  /***** PRIVATES *****/\n  //==== utils ===\n  var timePromise;//promesse contenant le retour d'API \"hour\"\n\n  //==== funcs ===\n  //Func de balance entre la promise et son enregistrement (evite de charger l'API 2x)\n  var _requestTimer = function(){\n    return timePromise = timePromise === undefined ? _requestPromise() : timePromise;\n  };\n\n  //Func to get time from djdb server\n  var _requestPromise = function() {\n    //variables\n    let type = 'GET';\n    let url = \"https://api.de-jaune-et-de-bleu.com/Get/hour\";\n    let params = {};\n    var hourRequest = new AjaxRequest(url, type);\n    return hourRequest.getRequestPromise(params);\n  };\n\n  //Func to create time\n  var _checkTime = function(i) {\n    if (i < 10) {\n        i = \"0\" + i // add zero in front of numbers < 10\n    }\n    return i;\n  };\n\n  //Func pour calculer l'heure\n  var _clock = function(setTime) {\n    //init time pour eviter un decalage avec la récupération async de l'heure serveur\n    var initTime = setTime.setSeconds(new Date(Date.now()).getSeconds());\n\n    //func de timer\n    var clockMechanism = function(setTime){\n      //variables de temps\n      let today = new Date(setTime);\n      let now = new Date(Date.now());\n\n\n      //recalcul\n      let diff = now.getSeconds() - today.getSeconds();\n      diff < 0 ? diff = 1 : diff = diff; //corriger le differentiel au changement de minute\n      if(diff > 0 ){\n\n        //Affichage dans le DOM\n        this.hour.innerHTML = _checkTime(today.getHours());\n        this.min.innerHTML = _checkTime(today.getMinutes());\n\n        today.setSeconds(today.getSeconds() + diff); //change secondes\n      }\n\n      //regeneration par seconde\n      setTimeout(()=>{\n        clockMechanism.call(this, today);\n      }, 100);\n    }\n\n    //init\n    clockMechanism.call(this, initTime);\n  };\n\n  /***** PUBLICS *****/\n\n  //Func pour récupérer l'heure brut depuis le server\n  var getHour = function() {\n    return _requestTimer();\n  };\n\n  //Func pour afficher l'heure\n  var displayHour = function() {\n\n    //On récupère l'heure via une promise AJAX\n    let defferedHour = _requestTimer();\n    defferedHour.then((success)=>{\n      //Success : on appelle la fonction de génération de l'-heure\n      _clock.call(this, new Date(success));\n\n    }, function(error) {\n      window.console.log('Error : ' + error);\n    });\n  };\n\n  //Func pour afficher ce qu'il se passe à l'atelier en fonction de l'heure\n  var displayPeople = function(target, welcome) {\n    var stateTarget = target;\n    var messageTarget = welcome;\n\n    //on récupère l'heure => A FAIRE !! chainer une promise après recupe date pour gérer l'heure sans faire une double requete : si, this undefined alors, enregistrer la premiere promise en this et chainer les propriétés à cette promise. enfin stocker le resultat en this\n    var defferedHour = _requestTimer();\n    defferedHour.then(function(success) {\n      //Success : on segmente l'heure\n\n      var hourData = new Date(success);\n      var hour = hourData.getHours(),\n      day = hourData.getDay(),\n      peopleContent, isWelcome;\n\n      let language = utils.getLanguage();\n\n      //Segmentation\n      if(day === 0 || day === 6){\n        //weekend\n        peopleContent = wording[language][\"weekend\"];\n        isWelcome = wording[language][\"fermee\"];\n\n      } else if(hour >= 9 && hour <= 11) {\n        peopleContent = wording[language][\"matin\"];\n        isWelcome = wording[language][\"ouvert\"];\n      } else if (hour >= 12 && hour <= 13) {\n        peopleContent = wording[language][\"midi\"];\n        isWelcome = wording[language][\"ouvert\"];\n      } else if (hour >= 14 && hour <= 18) {\n        peopleContent = wording[language][\"apresmidi\"];\n        isWelcome = wording[language][\"ouvert\"];\n      } else if (hour >= 19 && hour <= 23) {\n        peopleContent = wording[language][\"soir\"];\n        isWelcome = wording[language][\"fermee\"];\n      } else {\n        peopleContent = wording[language][\"nuit\"];\n        isWelcome = wording[language][\"fermee\"];\n      }\n\n      //display dans le DOM\n      stateTarget.innerHTML = peopleContent;\n      messageTarget.innerHTML = isWelcome;\n    }, function(error) {\n      window.console.log('Error : ' + error);\n    });\n  };\n\n  return {\n    displayHour,\n    displayPeople,\n    getHour\n  };\n}();\n\nexport { TimeServer };\n","//modules utils\nimport { AjaxRequest } from '../../utils/promises-ajax.js';\n\n//------------------------------\n//==============================\n// MODULE BIKE SHARING\n//==============================\n//------------------------------\n\nvar Velib = function(bikeTarget) {\n  this.bikeTarget = bikeTarget;\n};\n\nVelib.prototype = function() {\n  /***** PUBLIC *****/\n  //==== funcs ====\n  var getInformation = function() {\n\n    //variables\n    let type = 'GET';\n    let url = 'https://api.de-jaune-et-de-bleu.com/Get/bike';\n    let params = {};\n    var self = this;\n\n    //création de la promise Ajax\n    var velibRequest = new AjaxRequest(url, type);\n    var velibDeffered = velibRequest.getRequestPromise(params);\n\n    //resolution de promise\n    velibDeffered.then(function(success) {\n      //success : affichage du nombre de vélo dispos\n      var velibStation = JSON.parse(success);\n      self.bikeTarget.innerHTML = velibStation.available_bike_stands;\n    }, function(error) {\n      //Echec : message erreur\n      window.console.log('Error : ' + error);\n    });\n  };\n\n  return {\n    getInformation\n  };\n}();\n\nexport { Velib };\n","//modules utils\nimport { AjaxRequest } from '../../utils/promises-ajax.js';\nimport { utils } from '../../utils/helpers.js';\n\n\n//modules content\nimport { Forecast } from './weather.js';\nimport { Subway } from './subway.js';\nimport { TimeServer } from './time.js';\nimport { Velib } from './bike.js';\n\n//------------------------------\n//==============================\n// MODULE GENERAL FOOTER\n//==============================\n//------------------------------\n\n//EXPORT\nexport default function footer(){\n  //meteo\n  var weatherTarget = document.getElementById(\"footer-weather\");\n  var tempTarget = document.getElementById(\"footer-temp\");\n\n  var forecastObj = new Forecast(weatherTarget, tempTarget);\n  forecastObj.getWeather();\n\n  //velos\n  var bikeTarget = document.getElementById(\"footer-bikes\");\n  var bikeObj = new Velib(bikeTarget);\n  bikeObj.getInformation();\n\n  //subway\n  var subwayTarget = document.getElementById(\"footer-subway\");\n  var subwayObj = new Subway(subwayTarget);\n  var deferedSubway = subwayObj.getSubwayTraffic();\n  deferedSubway.then(function(data){\n    //validation etat traffic\n\n    var wording = {\n      en: {\n        ok: \"OK\",\n        nok: \"disturbed\",\n        hs: \"out for now\"\n      },\n      fr: {\n        ok: \"à l'heure\",\n        nok: \"retardée\",\n        hs: \"hors service\"\n      }\n    };\n\n    let language = utils.getLanguage();\n\n    //ajout de l'heure pour mettre le traffic HS\n    let time = new Date();\n    var state = data.result.slug;\n    if(time.getHours() > 1 && time.getHours() < 6){\n      state = \"hors-service\";\n    }\n\n\n    if(state === \"normal\"){\n      var etat = wording[language][\"ok\"];\n    }else if(state === \"hors-service\"){\n      var etat = wording[language][\"hs\"];\n    }else{\n      var etat = wording[language][\"nok\"];\n    }\n\n    subwayTarget.innerHTML = etat;\n  });\n\n  //heure\n  var minutesTarget = document.getElementById(\"footer-minute\");\n  var hoursTarget = document.getElementById(\"footer-hour\");\n  var stateTarget = document.getElementById(\"footer-state\");\n  var welcomeTarget = document.getElementById(\"footer-welcome\");\n  var hourObj = new TimeServer(hoursTarget, minutesTarget);\n  hourObj.displayHour();\n  hourObj.displayPeople(stateTarget, welcomeTarget);\n};\n","//------------------------------\n//------------------------------\n// MODULE GENERAL SELECT FORM\n//------------------------------\n//------------------------------\n\nvar SelectForm = function(el){\n  this.el = el;\n  this.modalTool = el.querySelector('.c-select__tool');\n  this.options = el.querySelectorAll('.c-select__values');\n  this.placeholder = el.querySelector('.c-select__placeholder');\n  this.placeholderInitWording  = this.placeholder.innerHTML;\n\n  //action\n  this.init();\n}\n\nSelectForm.prototype = function(){\n\n  //-----------------------\n  // PRIVATE\n  //-----------------------\n\n\n\n  // fonction d'event au click sur la selectbox (private)\n  var _selectboxCLick = function(e){\n    var matches = document.body.matchesSelector || document.body.webkitMatchesSelector || document.body.mozMatchesSelector || document.body.msMatchesSelector || document.body.webkitMatchesSelector || document.body.matchesSelector\n\n    // test pour savoir si lien est select\n\n    if (e.target.classList.contains('c-select__placeholder')) {\n      e.stopPropagation();\n\n      //remplacement option choisie par placeholder initial => pour savoir de quoi on parle\n      if(this.el.classList.contains('c-select--is-open')){\n        // si on a déjà fait une selection\n        if(this.selected){\n          this.placeholder.innerHTML = this.selected.textContent;\n        }\n      }else{\n        this.placeholder.innerHTML = this.placeholderInitWording;\n      }\n\n    // on click sur un item\n    }else if(e.target.classList.contains('c-select__value__wording')){\n      e.stopPropagation();\n\n      // on efface l'ancienne selection\n      if(this.selected){\n        this.selected.classList.remove('is-selected');\n      }\n\n      // rec du champs selectionné et ajout class de selectionné\n      this.selected = e.target.parentNode;\n      e.target.parentNode.classList.add(\"is-selected\");\n\n      this.el.querySelector('.c-select__tool [value=\"' + this.selected.getAttribute(\"data-value\") + '\"]').selected = true;\n\n      //remplacement option choisie dans le placeholder\n      this.placeholder.innerHTML = e.target.textContent;\n    }\n\n    // on ferme / ouvre\n    this.el.classList.toggle('c-select--is-open');\n  },\n\n\n  // BIND DES EVENTS (private)\n  _bindEvent = function(el){\n\n    let EventSelectboxClick = _selectboxCLick.bind(this);\n\n\n    //bind du click sur la select box => event delegation\n    el.addEventListener('click', EventSelectboxClick, false);\n\n  };\n\n  //-----------------------\n  // PUBLIC\n  //-----------------------\n\n  // INIT DU MODULE (public)\n  var init = function(){\n\n    _bindEvent.call(this, this.el);\n\n  }\n\n  return{\n    init\n  }\n}();\n\nexport { SelectForm };\n","//modules import\nimport { SelectForm } from './selectform';\nimport { AjaxRequest } from '../../utils/promises-ajax.js';\nimport { utils } from '../../utils/helpers.js';\n\n\n//------------------------------\n//------------------------------\n// MODULE GENERAL CONTACT\n//------------------------------\n//------------------------------\n\n/**\n* Créer un nouveau formulaire\n* @class\n*/\nvar ContactForm = function(el = null){\n  this.el = el;\n  this.next = el.querySelectorAll('.js-formnext');\n  this.secure = false;\n\n  this.data = {\n    t: \"msg\",\n    lang: utils.getLanguage()\n  };\n}\n\nContactForm.prototype = function(){\n\n  //----------------\n  // PRIVATE\n  //----------------\n\n  // Rooting des scope formulaire (private)\n  var _sectionScopeRoute = function(section){\n\n    switch(section.getAttribute('data-section')){\n      case '1':\n        _scopeName.call(this, section);\n        break;\n\n      case '2':\n        _scopeBusinessType.call(this, section);\n        break;\n\n      case '3':\n        _scopeBusinessName.call(this, section);\n        break;\n\n      case '4':\n        _scopeMission.call(this, section);\n        break;\n\n      case '5':\n        _scopeMissionDetail.call(this, section);\n        break;\n\n      case '6':\n        _scopeMessage.call(this, section);\n        break;\n\n      case '7':\n        _scopeEmail.call(this, section);\n        break;\n    }\n  },\n\n  // fonction du scope du name\n  _scopeName = function(scope){\n\n    // rec le nom dans la variable globale\n    this.data.name = scope.querySelector('.js-formanswer').value;\n\n    // poser le nom dans la phrase suivante\n    [].slice.call( document.querySelectorAll('.formName') ).forEach( (el)=>{\n      el.innerHTML = this.data.name;\n    });\n\n    _changeQuestionNumber.call(this, scope.getAttribute(\"data-section\"));\n\n    _animationNewScope.call(this, scope);\n  },\n\n\n  // fonction du scope du business type\n  _scopeBusinessType = function(scope){\n\n    // rec le nom dans la variable globale\n     this.data.businessType = scope.querySelector('.js-formanswer').value;\n\n     var wording = {\n       en: {\n         persoNom: \"you\",\n         persoPronom: \"me\",\n         companyNom: \"this company\",\n         companyPronom: \"us\",\n         orgaNom: \"this organization\",\n         orgaPronom: \"us\",\n       },\n       fr: {\n         persoNom: \"vous\",\n         persoPronom: \"me\",\n         companyNom: \"cette entreprise\",\n         companyPronom: \"nous\",\n         orgaNom: \"cette organisation\",\n         orgaPronom: \"nous\",\n       }\n     };\n\n     switch(this.data.businessType){\n       case \"1\":\n        var businessNomination = wording[this.data.lang][\"persoNom\"];\n\n        var businessPronoun = wording[this.data.lang][\"persoPronom\"];\n       break;\n\n       case \"2\":\n         var businessNomination = wording[this.data.lang][\"companyNom\"];\n         var businessPronoun = wording[this.data.lang][\"companyPronom\"];\n       break;\n\n       case \"3\":\n       var businessNomination = wording[this.data.lang][\"orgaNom\"];\n       var businessPronoun = wording[this.data.lang][\"orgaPronom\"];\n       break;\n\n       default:\n         var businessNomination = wording[this.data.lang][\"orgaNom\"];\n         var businessPronoun = wording[this.data.lang][\"orgaPronom\"];\n       break;\n     }\n\n     // poser le nom dans la phrase suivante\n     document.getElementById('businessNomination').innerHTML = businessNomination;\n     document.getElementById('businessPronoun').innerHTML = businessPronoun;\n\n     // changement numéro question\n     _changeQuestionNumber.call(this, scope.getAttribute(\"data-section\"));\n     _animationNewScope.call(this, scope);\n\n  },\n\n  // fonction du scope du business name\n  _scopeBusinessName = function(scope){\n\n    // rec le nom dans la variable globale\n     this.data.businessName = scope.querySelector('.js-formanswer').value;\n\n    // changement numéro question\n    _changeQuestionNumber.call(this, scope.getAttribute(\"data-section\"));\n    _animationNewScope.call(this, scope);\n  },\n\n  // fonction du scope de la mission\n  _scopeMission = function(scope){\n\n    // rec le nom dans la variable globale\n     this.data.mission = scope.querySelector('.js-formanswer').value;\n\n     // affichage des détails de mission en fonction du choix de la mission\n     let switcher = document.getElementById('form-switchMissionDetails');\n\n     //reset style de la liste\n     [].slice.call( switcher.querySelectorAll('li') ).forEach( function(el) {\n       el.style.display = \"block\";\n     });\n\n     //modif\n     switch(this.data.mission){\n      case \"1\":\n        [].slice.call( switcher.querySelectorAll('li:nth-child(-n+4)') ).forEach( function(el) {\n          el.style.display = \"none\";\n        });\n        break;\n\n      case \"2\":\n        [].slice.call( switcher.querySelectorAll('li:nth-child(n+5):nth-child(-n+6)') ).forEach( function(el) {\n          el.style.display = \"none\";\n        });\n        break;\n\n      case \"3\":\n        [].slice.call( switcher.querySelectorAll('li:nth-child(n+4):nth-child(-n+6)') ).forEach( function(el) {\n          el.style.display = \"none\";\n        });\n        break;\n\n      case \"4\":\n        [].slice.call( switcher.querySelectorAll('li:nth-child(n+5):nth-child(-n+6)') ).forEach( function(el) {\n          el.style.display = \"none\";\n        });\n        break;\n\n      case \"5\":\n        [].slice.call( switcher.querySelectorAll('li:nth-child(n+5):nth-child(-n+6)') ).forEach( function(el) {\n          el.style.display = \"none\";\n        });\n        break;\n\n     }\n\n     // changement numéro question\n     _changeQuestionNumber.call(this, scope.getAttribute(\"data-section\"));\n     _animationNewScope.call(this, scope);\n  },\n\n  // fonction du scope du business name\n  _scopeMissionDetail = function(scope){\n\n    // rec le nom dans la variable globale\n     this.data.missionDetails = scope.querySelector('.js-formanswer').value;\n\n     // changement numéro question\n     _changeQuestionNumber.call(this, scope.getAttribute(\"data-section\"));\n     _animationNewScope.call(this, scope);\n  },\n\n  // fonction du scope du message\n  _scopeMessage = function(scope){\n\n    // rec le nom dans la variable globale\n    this.data.message = scope.querySelector('.js-formanswer').value;\n\n    // changement numéro question\n    _changeQuestionNumber.call(this, scope.getAttribute(\"data-section\"));\n    _animationNewScope.call(this, scope);\n  },\n\n  // fonction du scope de l'email (private)\n  _scopeEmail = function(scope){\n\n    let formAnswer = scope.querySelector('.js-formanswer');\n    let buttonNext = scope.querySelector('.js-formnext');\n    let icoError = scope.querySelector('.js-formerror');\n\n\n    /** fonction de validation email à la frappe */\n    let validEmail = function(){\n      if(_testEmail(formAnswer.value)){\n        formAnswer.classList.remove(\"contactform__answer--wrong\");\n        buttonNext.classList.remove(\"m-nodisplay\");\n        icoError.classList.add(\"m-nodisplay\");\n\n\n        formAnswer.removeEventListener('keyup', formAnswer, false);\n      }\n    };\n\n    /** rec le nom dans la variable globale */\n    if(_testEmail(formAnswer.value)){\n      this.data.email = formAnswer.value;\n      formAnswer.classList.remove(\"contactform__answer--wrong\");\n\n      let ajaxForm = new AjaxRequest(\"https://api.de-jaune-et-de-bleu.com/Post/contact\");\n      ajaxForm.postRequestPromise(this.data).then(res=>{\n        console.log('message sent'); // mettre ici le passage au message d'envoi (ou non -> sauvegarde);\n      });\n\n      /** animation */\n      _animationNewScope.call(this, scope);\n\n    }else{\n\n      buttonNext.classList.add(\"m-nodisplay\");\n      icoError.classList.remove(\"m-nodisplay\");\n\n      formAnswer.classList.add(\"contactform__answer--wrong\");\n      formAnswer.addEventListener('keyup', validEmail, false);\n    }\n  },\n\n\n  // desactiver la touche enter sur le formulaire pour eviter envois non désirés (private)\n  _disableEnterEventer = function(){\n    let answersInputs = this.el.querySelectorAll('.js-formanswer');\n\n    this.el.addEventListener('keypress', e=>{\n      if(e.keyCode == 13 && !e.target.classList.contains(\"js-formanswerText\") ){ //enter hors textarea\n        e.preventDefault();\n\n        if(this.secure === true){\n          // simule le click pour envoyer la réponse\n          e.target.blur(); //quiter le champs lors du click sur enter\n          _sectionScopeRoute.call(this, utils.findAncestor(e.target, \"contactform__group\"));\n        }\n\n      }\n    }, false);\n  },\n\n  // changer le numéro de la question (private)\n  _changeQuestionNumber = function(num){\n    const firstItem = this.el.querySelector('.counter__item--first');\n    firstItem.innerHTML = (parseInt(num) + 1) ;\n  },\n\n\n\n  /**\n  * fonction pour valider ecriture email (private)\n  * @param {string} email - structure email à valider\n  * @returns {boolean}\n  */\n  _testEmail = function(email){\n    let re = /^(([^<>()\\[\\]\\\\.,;:\\s@\"]+(\\.[^<>()\\[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/;\n    return re.test(email);\n  },\n\n\n\n  /**\n   * _apparitionNextButton - apparition du bouton suivant (private)\n   * @param  {nodelist} scope - scope courant\n   * @param  {boolean} appear - apparition ou disparition\n   */\n  _nextButton = function(scope, appear){\n    let buttonContainer = scope.querySelector('.js-formnext');\n    let buttonShape = buttonContainer.querySelector('.ico-arrow-poly');\n\n    buttonContainer.classList.remove(\"m-opty0\");\n\n    //scenario animation\n    let animation = anime.timeline();\n    animation.add({\n      targets: buttonContainer,\n      duration: 400,\n      easing: \"easeInCirc\",\n      opacity: [0,1]\n    })\n    .add({\n      targets: buttonShape,\n      duration: 400,\n      offset: \"-=100\",\n      easing: [0,1.18,.76,1.32],\n      translateX: [-60, 0],\n      points: [\n        {value: \"35,7 90,60 35,113\"},\n        {value: \"40,2 90,60 40,118\"},\n        {value: \"35,7 90,60 35,113\"}\n      ]\n    })\n\n    if(appear){\n      animation.play();\n    }else{\n      animation.reverse();\n    }\n  },\n\n\n\n  /**\n   * _observer - fonction de création d'un observer (placement en utils ?) (private)\n   * @param  {nodelist} el       - element à observe\n   * @param  {callback} callback - callback à appliquer lorsque un changement est apparu\n   */\n  _observer = function(el, callback){\n\n    // création d'un observer pour vérifier changement DOM listes\n    let observer = new MutationObserver(function(mutations) {\n      mutations.forEach(function(mutation) {\n        //Action\n        callback(mutation, observer);\n      });\n    });\n\n    //observation\n    observer.observe(el, {childList: true, characterData : true, attributes: true});\n  },\n\n\n\n  /**\n   * _observerSelect - callback pour observer (private)\n   * @param  {type} mutation - mutation à observer\n   * @param  {type} observer - objet observer\n   */\n  _observerSelect = function(mutation, observer){\n\n    let wording = {\n      en: \"- choose -\",\n      fr: \"- choisir -\"\n    };\n\n    if(mutation.target.innerHTML != wording[this.data.lang]){\n      _nextButton(utils.findAncestor(mutation.target, \"contactform__group\"), true);\n      this.secure = true;\n      observer.disconnect(); //fin\n    }\n  },\n\n\n\n  /**\n   * _enableAnswerObserver - fonction pour débuter l'observation des réponses  (private)\n   */\n  _enableAnswerObserver = function(){\n\n    let inputs = this.el.querySelectorAll('.js-formanswer:not(select):not(textarea), .c-select__placeholder');\n\n    for(let i = 0; i < inputs.length; i++ ){\n      if(inputs[i].nodeName.toLowerCase() === \"span\"){\n\n        //observer pour les listes (pas d'event sur les nodes de textes)\n        _observer.call(this, inputs[i], _observerSelect.bind(this));\n      }else{\n        let j = 0;\n\n        //event pour les inputs et txtarea\n        inputs[i].addEventListener(\"input\",e=>{\n\n          if(e.target.value.length === 0){\n            _nextButton(utils.findAncestor(inputs[i], \"contactform__group\"), false);\n            this.secure = false;\n\n          }else if(e.target.value.length === 1 && j < 1 || this.secure === false){\n            _nextButton(utils.findAncestor(inputs[i], \"contactform__group\"), true);\n            this.secure = true;\n          }\n\n          // reset ancienne valeur\n          j = e.target.value.length;\n        }, false);\n\n      }\n    }\n  },\n\n\n\n\n\n\n  /**\n  * fonction d'animation des textes du formulaire (private)\n  * @param {string} scope - scope à animer\n  */\n  _animationAppear = function(scope){\n\n    /** params texte */\n    let animation = {}\n\n    animation.writters = scope.querySelectorAll(\".contactform__writter\");\n    animation.question = scope.querySelector(\".js-question\");\n    animation.answer = scope.querySelector(\".js-answer\");\n    animation.answerInput = scope.querySelector(\".js-formanswer, .c-select__placeholder\");\n\n    /** decomposition char */\n    utils.charming(animation.question, { classPrefix: \"letter char\" });\n    animation.questionChars = animation.question.querySelectorAll('.letter');\n\n    if(animation.answer !== null){\n      utils.charming(animation.answer, { classPrefix: \"letter char\" });\n      animation.answerChars = animation.answer.querySelectorAll('.letter');\n    }\n\n\n    /** params animation */\n    const animeParam = {\n      letters: {\n        speed: 26,\n        duration: 50\n      },\n      writter: {\n        duration: 1000,\n        delay: 500\n      }\n    }\n\n    let cursorMovementDuration = quote => animeParam.letters.speed * quote.querySelectorAll('span.letter').length + animeParam.letters.duration - 25; //pas -25 pour gérer la diff d'espacement entre lettres en d'avance\n    scope.style.display = \"block\";\n\n    /** animation timeline */\n    let formAnimation = anime.timeline({autoplay: true});\n    formAnimation.add({ //apparition name\n      targets: animation.writters[0],\n      opacity: [0,1],\n      translateY: [50, 0],\n      easing: \"easeOutElastic\",\n      elasticity: 100,\n      duration: animeParam.writter.duration,\n      delay: animeParam.writter.delay\n    })\n    .add({ //apparition question\n      targets: animation.questionChars,\n      opacity: [0,1],\n      easing: \"linear\",\n      duration: animeParam.letters.duration,\n      delay: function(el, i){\n        return animeParam.letters.speed * (i+1);\n      }\n    })\n    .add({ //apparition 2e writter\n      targets: animation.writters[1],\n      opacity: [0,1],\n      translateY: [50, 0],\n      easing: \"easeOutElastic\",\n      elasticity: 100,\n      duration: animeParam.writter.duration,\n      delay: animeParam.writter.delay\n    })\n    .add({\n      targets: animation.answerChars,\n      opacity: [0,1],\n      easing: \"easeOutExpo\",\n      duration: 50,\n      delay: function(el, i) {\n        return animeParam.letters.speed * (i+1);\n      }\n    })\n    .add({ //apparition barre\n      targets: animation.answerInput,\n      scaleX: [0,1],\n      easing: \"easeOutExpo\",\n      duration: 600,\n      offset: '+=20',\n      complete: function(){\n        //Selection de l'input\n        if(animation.answerInput){\n          if(animation.answerInput.nodeName.toLowerCase() === \"input\" || animation.answerInput.nodeName.toLowerCase() === \"textarea\"){\n            // animation.answerInput.focus(); => recardre la page\n            animation.answerInput.select();\n          }\n        }\n      }\n    });\n\n  },\n\n\n\n  /**\n   * _animationNewScope - animation au fadeout après validation d'une étape\n   * @param  {nodelist} scope scope a effacer\n   */\n  _animationNewScope = function(scope){\n\n    this.secure = false;\n\n    let tl = anime.timeline();\n    tl.add({\n      targets: scope,\n      duration: 800,\n  //    easing: [.3,-0.42,.81,.04],\n      easing: \"easeInSine\",\n      //elasticity: 400,\n      // translateY: -70,\n      translateY: [\n        {value: 70},\n        {value: -70}\n      ],\n      opacity: 0,\n      complete: function(){\n        setTimeout(()=>{\n          scope.style.display = \"none\";\n          _animationAppear(scope.nextElementSibling);\n        }, 500);\n      }\n    });\n\n    // tl.finished.then(()=>{\n    //\n    // });\n\n  };\n\n\n  //----------------\n  // PUBLIC\n  //----------------\n\n  // fonction d'initialisation (public)\n  var init = function(){\n\n    // detecter toutes les select box\n    [].slice.call( document.querySelectorAll('.c-select') ).forEach( function(el) {\n      new SelectForm(el);\n    });\n\n    // click sur les étapes\n    for(let i = 0; i < this.next.length ; i++){\n      this.next[i].addEventListener('click', e=>{\n\n        // parent node pour avoir le scope de la question au dessus du bouton\n        _sectionScopeRoute.call(this, utils.findAncestor(this.next[i], \"contactform__group\"));\n      });\n    }\n\n    // desactiver l'envoi du formulaire sur enter\n    _disableEnterEventer.call(this);\n\n    //animation du contenu\n    _animationAppear(this.el.querySelector(\".contactform__group\"));\n\n\n    //apparition des boutons next\n    _enableAnswerObserver.call(this);\n\n  };\n\n  return{\n    init\n  }\n}();\n\n\n/** @module ContactForm */\nexport { ContactForm };\n","import { utils } from './utils/helpers.js';\nimport { Navigation } from './components/navigation/navigation.js';\nimport Footer from './components/footer/footer.js';\nimport { ContactForm } from './components/contact/contactform.js';\n\n\n\nvar bundle = (function(){\n\n  // navigationUI (private)\n  var navigation = {\n\n    config: {\n      navigationEl : document.querySelectorAll('.menu') || null,\n      contactFormEl : document.getElementById('contactForm') || null\n\n    },\n\n    init: function(){\n      if(this.config.navigationEl != null){  // load and init module\n        for(let i = 0; i < this.config.navigationEl.length; i++){ //pas de boucle ici nirmalement\n          var navigation = new Navigation(this.config.navigationEl[i]);\n          navigation.init();\n        }\n\n         return navigation;\n      }\n    }\n  };\n\n\n  // contact formulaire (private)\n  var contactForm = {\n\n    config: {\n      contactFormEl : document.getElementById('contactForm') || null\n    },\n\n    init: function(){\n      if(this.config.contactFormEl != null){  // load and init module          var contactForm = new Navigation(this.config.navigationEl[i]);\n        var contactForm = new ContactForm(this.config.contactFormEl);\n        contactForm.init();\n      }\n    }\n  };\n\n  var BindUIActions = {\n\n    config: {},\n\n    init: function(){\n      this.config.navigation = navigation.init(); //bind navigation (closure)\n      contactForm.init();// contact\n      // footer\n      // introAnimation\n      // scroller\n      // animation texte\n      // script Tag manager macro\n    },\n\n    resize: function(){\n      window.addEventListener(\"resize\", ()=>{\n\n        //call tous les resizeEvent\n        this.config.navigation.resize();\n\n        //actualisation effective de la largeur écran apres resize\n        if(window.innerWidth !== utils.viewportWidth ){\n          utils.viewportWidth = window.innerWidth;\n        }\n\n      }, false);\n    }\n  }\n\n  //----------------\n  // Initilisation\n  //----------------\n\n  //INIT GLOBAL\n  window.addEventListener(\"DOMContentLoaded\", function(event) {\n\n    Footer();\n    BindUIActions.init();\n    BindUIActions.resize();\n\n\n    // // Polyfill\n    // if (!window.Promise) {\n    //   window.Promise = Promise;\n    // }\n\n\n  }, false);\n\n})();\n"]}